<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="" productName="CODESYS" productVersion="CODESYS V3.5 SP15 Patch 2" creationDateTime="2019-11-27T16:56:11.2358005" />
  <contentHeader name="HomeAutomation.project" modificationDateTime="2019-11-27T16:32:26.3674326">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1" />
      </fbd>
      <ld>
        <scaling x="1" y="1" />
      </ld>
      <sfc>
        <scaling x="1" y="1" />
      </sfc>
    </coordinateInfo>
    <addData>
      <data name="http://www.3s-software.com/plcopenxml/projectinformation" handleUnknown="implementation">
        <ProjectInformation />
      </data>
    </addData>
  </contentHeader>
  <types>
    <dataTypes>
      <dataType name="COVER_STATES">
        <baseType>
          <enum>
            <values>
              <value name="Idle" />
              <value name="Auto" />
              <value name="Manual" />
              <value name="Prio_up" />
              <value name="Prio_dn" />
              <value name="Calibrate_up" />
              <value name="Calibrate_dn" />
            </values>
          </enum>
        </baseType>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>9c2a59ba-71cb-4d93-96a9-ad73a3290bb0</ObjectId>
          </data>
        </addData>
      </dataType>
      <dataType name="MQTT_MESSAGE">
        <baseType>
          <struct>
            <variable name="Payload">
              <type>
                <string length="128" />
              </type>
            </variable>
            <variable name="Topic">
              <type>
                <string length="128" />
              </type>
            </variable>
            <variable name="Qos">
              <type>
                <derived name="SD_MQTT.QoS" />
              </type>
            </variable>
            <variable name="MqttRetain">
              <type>
                <BOOL />
              </type>
            </variable>
          </struct>
        </baseType>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>3cef9a7f-966d-4e13-b498-e616988669d3</ObjectId>
          </data>
        </addData>
      </dataType>
    </dataTypes>
    <pous>
      <pou name="_RMP_B" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="DIR">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> true = up </xhtml>
              </documentation>
            </variable>
            <variable name="E">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="TRUE" />
              </initialValue>
            </variable>
            <variable name="TR">
              <type>
                <TIME />
              </type>
            </variable>
          </inputVars>
          <inOutVars>
            <variable name="RMP">
              <type>
                <BYTE />
              </type>
            </variable>
          </inOutVars>
          <localVars>
            <variable name="tx">
              <type>
                <TIME />
              </type>
            </variable>
            <variable name="tl">
              <type>
                <TIME />
              </type>
            </variable>
            <variable name="tn">
              <type>
                <TIME />
              </type>
            </variable>
            <variable name="init">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="last_dir">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="start">
              <type>
                <BYTE />
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">(* read system timer *)
tx := DWORD_TO_TIME(OSCAT_BASIC.T_PLC_MS());

IF E AND init AND (dir = last_dir) AND (RMP &lt;&gt; SEL(DIR, 0, 255)) AND TR = tn THEN
	RMP := OSCAT_BASIC.FRMP_B(start, DIR, tx - tl, TR);
ELSE
	init := TRUE;
	tl := tx;
	tn := tr;
	start := RMP;
END_IF;
last_dir := dir;



(* revison history
hm	22. oct. 2008	rev 1.0
	original version

hm	20. nov. 2008	rev 1.1
	set default for E to be TRUE
	added init

hm	19. nov. 2011	rev 1.2
	new code
*)</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="SetRMP" ObjectId="b3508619-19b6-4ffb-80df-5223258b7afb">
              <interface>
                <inputVars>
                  <variable name="RMP">
                    <type>
                      <BYTE />
                    </type>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">(*THIS^.RMP:=RMP;*)
THIS^.Start:=RMP;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>3f48a6c7-636f-43ab-9386-15f2f982ba50</ObjectId>
          </data>
        </addData>
      </pou>
      <pou name="BLIND_ACTUATOR" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="UP">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="DN">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="S_IN">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="T_UD">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#10s0ms" />
              </initialValue>
            </variable>
            <variable name="T_ANGLE">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#3s0ms" />
              </initialValue>
            </variable>
            <variable name="T_LOCKOUT">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#100ms" />
              </initialValue>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="input_constant" Value="" />
                  </Attributes>
                </data>
              </addData>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="POS">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="ANG">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="QU">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="QD">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="STATUS">
              <type>
                <BYTE />
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="position">
              <type>
                <derived name="RMP_B" />
              </type>
            </variable>
            <variable name="angle">
              <type>
                <derived name="RMP_B" />
              </type>
            </variable>
            <variable name="lock">
              <type>
                <derived name="OSCAT_BASIC.INTERLOCK" />
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">(* make sure only one motor is active at a given time *)
lock(i1 := UP, I2 := DN, TL := T_lockout);

(* ramp up or down to simulate the angle position of the blind slats *)
angle(e := lock.Q1 OR lock.Q2, UP := lock.Q1, PT := T_Angle);
position(e := lock.Q1 AND angle.high OR lock.Q2 AND angle.low, up := lock.Q1, PT := T_UD);

(* set the outputs *)
pos := position.Out;
ang := angle.Out;

(* set the outputs *)
QU := lock.Q1;
QD := lock.Q2;

(* set the status output *)
IF UP AND DN THEN
	 status := 1;			(* error up and down together are not allowed *)
ELSIF UP THEN
	status := 121;
ELSIF DN THEN
	status := 122;
ELSE
	status := S_IN;
END_IF;


(* revision history
hm	29. sep 2007	rev 1.0
	original release

hm	6. oct 2007	rev 1.1
	rearanged outputs

hm	18. oct. 2008	rev 1.2
	changed calls for rmp_B because of change in RMP_B

hm	27. jul. 2009	rev 1.3
	changes status to be 12X

ae	08. mar. 2010 rev 1.4	
	at aPosition

*)</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="SetPOS" ObjectId="167b6021-0c88-4bdd-921c-8c5ecedef703">
              <interface>
                <inputVars>
                  <variable name="POS">
                    <type>
                      <BYTE />
                    </type>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.POS:=POS;
THIS^.position.SetRMP(POS);</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>0b1d373a-2c7c-4799-af0f-162ae6b577e0</ObjectId>
          </data>
        </addData>
      </pou>
      <pou name="CALC_COVER_STATE" pouType="function">
        <interface>
          <returnType>
            <derived name="COVER_STATES" />
          </returnType>
          <inputVars>
            <variable name="UP">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="DN">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="PRIO_LOCK">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="PRIO_UP">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="PRIO_DN">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="PI">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="POS">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="MqttRequestAuto">
              <type>
                <pointer>
                  <baseType>
                    <BOOL />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="MqttRequestStop">
              <type>
                <pointer>
                  <baseType>
                    <BOOL />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="MqttRequestCalibrateUp">
              <type>
                <pointer>
                  <baseType>
                    <BOOL />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="MqttRequestCalibrateDn">
              <type>
                <pointer>
                  <baseType>
                    <BOOL />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="CurrentState">
              <type>
                <derived name="COVER_STATES" />
              </type>
            </variable>
            <variable name="StateTimer">
              <type>
                <pointer>
                  <baseType>
                    <derived name="TOF" />
                  </baseType>
                </pointer>
              </type>
            </variable>
          </inputVars>
          <localVars>
            <variable name="NewState">
              <type>
                <derived name="COVER_STATES" />
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">IF PRIO_LOCK THEN
	NewState := COVER_STATES.Idle;
	MqttRequestAuto^ := FALSE;
	MqttRequestStop^ := FALSE;
	MqttRequestCalibrateUp^ := FALSE;
	MqttRequestCalibrateDn^ := FALSE;
ELSIF PRIO_UP THEN
	NewState := COVER_STATES.Prio_up;
	MqttRequestAuto^ := FALSE;
	MqttRequestStop^ := FALSE;
	MqttRequestCalibrateUp^ := FALSE;
	MqttRequestCalibrateDn^ := FALSE;
ELSIF PRIO_DN THEN
	NewState := COVER_STATES.Prio_dn;
	MqttRequestAuto^ := FALSE;
	MqttRequestStop^ := FALSE;
	MqttRequestCalibrateUp^ := FALSE;
	MqttRequestCalibrateDn^ := FALSE;
ELSIF UP OR DN THEN
	NewState := COVER_STATES.Manual;
	MqttRequestAuto^ := FALSE;
	MqttRequestStop^ := FALSE;
	MqttRequestCalibrateUp^ := FALSE;
	MqttRequestCalibrateDn^ := FALSE;
ELSIF MqttRequestStop^ THEN
	NewState := COVER_STATES.Idle;
	MqttRequestAuto^ := FALSE;
	MqttRequestStop^ := FALSE;
	MqttRequestCalibrateUp^ := FALSE;
	MqttRequestCalibrateDn^ := FALSE;
ELSIF MqttRequestAuto^ AND PI &lt;&gt; POS THEN
	NewState := COVER_STATES.Auto;
	MqttRequestStop^ := FALSE;
	MqttRequestCalibrateUp^ := FALSE;
	MqttRequestCalibrateDn^ := FALSE;
ELSIF MqttRequestAuto^ AND PI = POS THEN
	NewState := COVER_STATES.Idle;
	MqttRequestAuto^ := FALSE;
	MqttRequestStop^ := FALSE;
	MqttRequestCalibrateUp^ := FALSE;
	MqttRequestCalibrateDn^ := FALSE;
ELSIF MqttRequestCalibrateUp^ THEN
	NewState := COVER_STATES.Calibrate_up;
	MqttRequestAuto^ := FALSE;
	MqttRequestStop^ := FALSE;
	MqttRequestCalibrateDn^ := FALSE;
ELSIF MqttRequestCalibrateDn^ THEN
	NewState := COVER_STATES.Calibrate_dn;
	MqttRequestAuto^ := FALSE;
	MqttRequestStop^ := FALSE;
	MqttRequestCalibrateDn^ := FALSE;
ELSE
	NewState := COVER_STATES.Idle;
	MqttRequestAuto^ := FALSE;
	MqttRequestStop^ := FALSE;
	MqttRequestCalibrateUp^ := FALSE;
	MqttRequestCalibrateDn^ := FALSE;
END_IF

IF NewState &lt;&gt; CurrentState THEN
	//Reset StateTimer
	StateTimer^.IN:=TRUE;
END_IF

CALC_COVER_STATE := NewState;</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>61b59663-b370-4a5a-9f46-4c3339a09478</ObjectId>
          </data>
        </addData>
      </pou>
      <pou name="RMP_B" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="SET">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="PT">
              <type>
                <TIME />
              </type>
            </variable>
            <variable name="E">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="TRUE" />
              </initialValue>
            </variable>
            <variable name="UP">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="TRUE" />
              </initialValue>
            </variable>
            <variable name="RST">
              <type>
                <BOOL />
              </type>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="OUT">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="BUSY">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="HIGH">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="LOW">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="rmp">
              <type>
                <derived name="_RMP_B" />
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">(* generate ramp *)
rmp(dir := UP, E := E, TR := PT, rmp := out);

(* set or reset operation *)
IF RST THEN
	out := 0;
ELSIF SET THEN
	out := 255;
END_IF;

(* checks for outputs stable and reset or set busy flag *)
low := out = 0;
high := out = 255;
busy := NOT (low OR high) AND E;


(* revision history

hm 5.10.2006	rev 1.1
	added busy output
hm 17.1.2007	rev 1.2
	renamed input ud to up for better usability
	deleted unused variable step

hm	17.9.2007		rev 1.3
	replaced time() with t_plc_ms() for compatibility reasons

hm	28. sep 2007	rev 1.4
	added outputs on and off
	busy is now disabled while en is false
	new coding for higher accuracy and performance

hm	5. oct 2007	rev 1.5
	added statements to allow for PT to be t#0s output jumps to max or min immediately

hm	25. dec 2007	rev 1.6
	improved code for better performance

hm	16. oct. 2008	rev 1.7
	improved code for better performance

hm	18. oct. 2008	rev 1.8
	added type conversion to avoid warnings
	changed input en to e for compatibility reasons

hm	23. oct. 2008	REV 	2.0
	new code using _RMP_B

*)</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="SetRMP" ObjectId="ef579e3a-a9bc-4ad0-a0ec-25cd1f479976">
              <interface>
                <inputVars>
                  <variable name="RMP">
                    <type>
                      <BYTE />
                    </type>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.OUT:=RMP;
THIS^.rmp.SetRMP(RMP);</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>ce7b29ca-5258-468f-8e59-690b72730bc9</ObjectId>
          </data>
        </addData>
      </pou>
      <pou name="FB_INPUT_BINARYSENSOR_MQTT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="BS">
              <type>
                <BOOL />
              </type>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="Q">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Follows the input but debounced </xhtml>
              </documentation>
            </variable>
            <variable name="EVENT">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Event outputs only high for on clock cycle </xhtml>
              </documentation>
            </variable>
            <variable name="EVENT_R">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="EVENT_F">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="InstanceName">
              <type>
                <string />
              </type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="instance-path" Value="" />
                    <Attribute Name="noinit" Value="" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> object's full instance name </xhtml>
              </documentation>
            </variable>
            <variable name="InitMqttDone">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="MqttPublishTopicPrefix">
              <type>
                <pointer>
                  <baseType>
                    <string />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="MqttPublishTopicSuffix">
              <type>
                <string length="15" />
              </type>
            </variable>
            <variable name="pMqttPublishQueue">
              <type>
                <pointer>
                  <baseType>
                    <derived name="FB_MqttPublishQueue" />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="FB_DEBOUNCE">
              <type>
                <derived name="OSCAT_BUILDING.DEBOUNCE" />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> to debounce the physical input </xhtml>
              </documentation>
            </variable>
            <variable name="FB_R_TRIG">
              <type>
                <derived name="Standard.R_TRIG" />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> to detect a rising edge on the debounced signal </xhtml>
              </documentation>
            </variable>
            <variable name="FB_F_TRIG">
              <type>
                <derived name="Standard.F_TRIG" />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> to detect a falling edge on the debounced signal </xhtml>
              </documentation>
            </variable>
          </localVars>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
              <Attributes>
                <Attribute Name="reflection" Value="" />
              </Attributes>
            </data>
          </addData>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">FB_DEBOUNCE(IN := BS,	
	TD := T#50MS, (* 2x cyle + 10ms *)
	PM := FALSE,
	Q=&gt;Q);

FB_R_TRIG(CLK := FB_DEBOUNCE.Q);
FB_F_TRIG(CLK := FB_DEBOUNCE.Q);

EVENT := FB_R_TRIG.Q OR FB_F_TRIG.Q;
EVENT_R := FB_R_TRIG.Q;
EVENT_F := FB_F_TRIG.Q;

IF FB_R_TRIG.Q AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := 'ON',
		Topic := CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := TRUE
	);
END_IF

IF FB_F_TRIG.Q AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := 'OFF',
		Topic := CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := TRUE
	);
END_IF</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="InitMqtt" ObjectId="946ec5b7-7059-481f-8608-807a404f7606">
              <interface>
                <inputVars>
                  <variable name="MQTTPublishPrefix">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="pMqttPublishQueue">
                    <type>
                      <pointer>
                        <baseType>
                          <derived name="FB_MqttPublishQueue" />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                </inputVars>
                <localVars>
                  <variable name="InstanceNamePt">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.pMqttPublishQueue := pMqttPublishQueue;
THIS^.MqttPublishTopicPrefix := MQTTPublishPrefix;

InstanceNamePt := CommonTypesAndFunctions.FindLastDot(ADR(THIS^.InstanceName)) + 1;
THIS^.MqttPublishTopicSuffix := InstanceNamePt^;

InitMqttDone := TRUE;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>2ae241ed-19d1-414f-86e0-147042ebb46c</ObjectId>
          </data>
        </addData>
      </pou>
      <pou name="FB_INPUT_PUSHBUTTON_DIMMER_MQTT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="PB">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="SET">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="VAL">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="RST">
              <type>
                <BOOL />
              </type>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="DIM">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="DBL">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="Q">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="SINGLE">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="DOUBLE">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="LONG">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="P_LONG">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="InstanceName">
              <type>
                <string />
              </type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="instance-path" Value="" />
                    <Attribute Name="noinit" Value="" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> object's full instance name </xhtml>
              </documentation>
            </variable>
            <variable name="InitMqttDone">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="MqttPublishTopicPrefix">
              <type>
                <pointer>
                  <baseType>
                    <string />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="MqttPublishTopicSuffix">
              <type>
                <string length="15" />
              </type>
            </variable>
            <variable name="pMqttPublishQueue">
              <type>
                <pointer>
                  <baseType>
                    <derived name="FB_MqttPublishQueue" />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="FB_DIMMER">
              <type>
                <derived name="OSCAT_BUILDING.DIMM_I" />
              </type>
            </variable>
            <variable name="OutputDimmer">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="Qos_Dimm">
              <type>
                <derived name="SD_MQTT.QoS" />
              </type>
            </variable>
            <variable name="Delta_Dimm">
              <type>
                <INT />
              </type>
            </variable>
            <variable name="FB_DETECTPUSH">
              <type>
                <derived name="OSCAT_BUILDING.CLICK_MODE" />
              </type>
            </variable>
            <variable name="P_LONG_R_TRIG">
              <type>
                <derived name="Standard.R_TRIG" />
              </type>
            </variable>
            <variable name="P_LONG_F_TRIG">
              <type>
                <derived name="Standard.F_TRIG" />
              </type>
            </variable>
            <variable name="PreviousDim">
              <type>
                <BYTE />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Vars to detect statechanges on outputs </xhtml>
              </documentation>
            </variable>
            <variable name="PreviousQ">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="PreviousDBL">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="T_Debounce">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#10ms" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Default values for dimmer, can be overwritten by method call </xhtml>
              </documentation>
            </variable>
            <variable name="T_Reconfig">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#10s0ms" />
              </initialValue>
            </variable>
            <variable name="T_On_Max">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#0ms" />
              </initialValue>
            </variable>
            <variable name="T_Dimm_Start">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#400ms" />
              </initialValue>
            </variable>
            <variable name="T_Dimm">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#3s0ms" />
              </initialValue>
            </variable>
            <variable name="Min_On">
              <type>
                <BYTE />
              </type>
              <initialValue>
                <simpleValue value="50" />
              </initialValue>
            </variable>
            <variable name="Max_On">
              <type>
                <BYTE />
              </type>
              <initialValue>
                <simpleValue value="255" />
              </initialValue>
            </variable>
            <variable name="Soft_Dimm">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="TRUE" />
              </initialValue>
            </variable>
            <variable name="Dbl_Toggle">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="FALSE" />
              </initialValue>
            </variable>
            <variable name="Rst_Out">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="FALSE" />
              </initialValue>
            </variable>
            <variable name="T_Long">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#400ms" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Default value for click mode, can be overwritten by method call </xhtml>
              </documentation>
            </variable>
          </localVars>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
              <Attributes>
                <Attribute Name="reflection" Value="" />
              </Attributes>
            </data>
          </addData>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">FB_DIMMER(
	IN:= PB,
	SET:= SET,
	VAL:= VAL,
	RST:= RST,
	OUT:= DIM,
	T_DEBOUNCE:= T_Debounce,
	T_RECONFIG:= T_Reconfig,
	T_ON_MAX:= T_On_Max,
	T_DIMM_START:= T_Dimm_Start,
	T_DIMM:= T_Dimm,
	MIN_ON:= Min_On,
	MAX_ON:= Max_On,
	SOFT_DIMM:= Soft_Dimm,
	DBL_TOGGLE:= Dbl_Toggle,
	RST_OUT:= Rst_Out,
	Q=&gt; Q,
	DBL=&gt; DBL);
	
FB_DETECTPUSH(
	IN:= PB, 	
	SINGLE=&gt; SINGLE, 
	DOUBLE=&gt; DOUBLE, 
	TP_LONG=&gt; LONG, 
	T_LONG:= T_long);
	
P_LONG_R_TRIG(CLK:=FB_DETECTPUSH.LONG);
P_LONG_F_TRIG(CLK:=FB_DETECTPUSH.LONG);
	
IF (ABS(BYTE_TO_INT(PreviousDim) - BYTE_TO_INT(DIM)) &gt;= Delta_Dimm OR PB = FALSE) AND DIM &lt;&gt; PreviousDim AND InitMqttDone AND OutputDimmer THEN
	PreviousDim:=DIM;
	pMqttPublishQueue^.AddMessage(		
		Payload := BYTE_TO_STRING(DIM),
		Topic := CONCAT(CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix), '/DIM'),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := FALSE
	);
END_IF

IF FB_DIMMER.Q &lt;&gt; PreviousQ AND InitMqttDone THEN
	PreviousQ:=FB_DIMMER.Q;
	pMqttPublishQueue^.AddMessage(
		Payload := BOOL_TO_STRING(FB_DIMMER.Q),
		Topic := CONCAT(CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix), '/Q'),
		Qos := Qos_Dimm,
		MqttRetain := TRUE
	);
END_IF

IF FB_DIMMER.DBL &lt;&gt; PreviousDBL AND InitMqttDone THEN
	PreviousDBL:=FB_DIMMER.DBL;
	pMqttPublishQueue^.AddMessage(
		Payload := BOOL_TO_STRING(FB_DIMMER.DBL),
		Topic := CONCAT(CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix), '/DBL'),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := TRUE
	);
END_IF

IF FB_DETECTPUSH.SINGLE AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := 'SINGLE',
		Topic := CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := FALSE
	);
END_IF

IF FB_DETECTPUSH.DOUBLE AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := 'DOUBLE',
		Topic := CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := FALSE
	);
END_IF

IF FB_DETECTPUSH.TP_LONG AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := 'LONG',
		Topic := CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := FALSE
	);
END_IF

IF (P_LONG_R_TRIG.Q OR P_LONG_F_TRIG.Q) AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := BOOL_TO_STRING(FB_DETECTPUSH.LONG),
		Topic := CONCAT(CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),'/P_LONG'),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := TRUE
	);
END_IF</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="InitMqtt" ObjectId="0c660b5e-4b28-4f99-a799-5108206ccfc1">
              <interface>
                <inputVars>
                  <variable name="MQTTPublishPrefix">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="pMqttPublishQueue">
                    <type>
                      <pointer>
                        <baseType>
                          <derived name="FB_MqttPublishQueue" />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="OutputDimmer">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="Qos_Dimm">
                    <type>
                      <derived name="SD_MQTT.QoS" />
                    </type>
                  </variable>
                  <variable name="Delta_Dimm">
                    <type>
                      <INT />
                    </type>
                  </variable>
                </inputVars>
                <localVars>
                  <variable name="InstanceNamePt">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.pMqttPublishQueue := pMqttPublishQueue;
THIS^.MqttPublishTopicPrefix := MQTTPublishPrefix;

InstanceNamePt := CommonTypesAndFunctions.FindLastDot(ADR(THIS^.InstanceName)) + 1;
THIS^.MqttPublishTopicSuffix := InstanceNamePt^;

THIS^.OutputDimmer:=OutputDimmer;
THIS^.Qos_Dimm:=Qos_Dimm;
THIS^.Delta_Dimm:=Delta_Dimm;

InitMqttDone := TRUE;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="ConfigureFunctionBlock" ObjectId="8923a8ec-096a-40a5-abdf-f4631fa1af23">
              <interface>
                <inputVars>
                  <variable name="T_Debounce">
                    <type>
                      <TIME />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Default values for dimmer, can be overwritten by method call </xhtml>
                    </documentation>
                  </variable>
                  <variable name="T_Reconfig">
                    <type>
                      <TIME />
                    </type>
                  </variable>
                  <variable name="T_On_Max">
                    <type>
                      <TIME />
                    </type>
                  </variable>
                  <variable name="T_Dimm_Start">
                    <type>
                      <TIME />
                    </type>
                  </variable>
                  <variable name="T_Dimm">
                    <type>
                      <TIME />
                    </type>
                  </variable>
                  <variable name="Min_On">
                    <type>
                      <BYTE />
                    </type>
                  </variable>
                  <variable name="Max_On">
                    <type>
                      <BYTE />
                    </type>
                  </variable>
                  <variable name="Soft_Dimm">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="Dbl_Toggle">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="Rst_Out">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="T_Long">
                    <type>
                      <TIME />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Default value for click mode, can be overwritten by method call </xhtml>
                    </documentation>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.T_Debounce:=T_Debounce;
THIS^.T_Reconfig:=T_Reconfig;
THIS^.T_On_Max:=T_On_Max;
THIS^.T_Dimm_Start:=T_Dimm_Start;
THIS^.T_Dimm:=T_Dimm;
THIS^.Min_On:=Min_On;
THIS^.Max_On:=Max_On;

THIS^.T_Long:=T_Long;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>06a3de0b-4cb9-4d5f-ade8-06ae23ed6c38</ObjectId>
          </data>
        </addData>
      </pou>
      <pou name="FB_INPUT_PUSHBUTTON_MQTT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="PB">
              <type>
                <BOOL />
              </type>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="SINGLE">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="DOUBLE">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="LONG">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="P_LONG">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="InstanceName">
              <type>
                <string />
              </type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="instance-path" Value="" />
                    <Attribute Name="noinit" Value="" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> object's full instance name </xhtml>
              </documentation>
            </variable>
            <variable name="InitMqttDone">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="MqttPublishTopicPrefix">
              <type>
                <pointer>
                  <baseType>
                    <string />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="MqttPublishTopicSuffix">
              <type>
                <string length="15" />
              </type>
            </variable>
            <variable name="pMqttPublishQueue">
              <type>
                <pointer>
                  <baseType>
                    <derived name="FB_MqttPublishQueue" />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="FB_DETECTPUSH">
              <type>
                <derived name="OSCAT_BUILDING.CLICK_MODE" />
              </type>
            </variable>
            <variable name="P_LONG_R_TRIG">
              <type>
                <derived name="Standard.R_TRIG" />
              </type>
            </variable>
            <variable name="P_LONG_F_TRIG">
              <type>
                <derived name="Standard.F_TRIG" />
              </type>
            </variable>
            <variable name="T_Long">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#400ms" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Default value for click mode, can be overwritten by method call </xhtml>
              </documentation>
            </variable>
          </localVars>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
              <Attributes>
                <Attribute Name="reflection" Value="" />
              </Attributes>
            </data>
          </addData>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">FB_DETECTPUSH(
	IN:= PB, 	
	SINGLE=&gt; SINGLE, 
	DOUBLE=&gt; DOUBLE, 
	TP_LONG=&gt; LONG, 
	LONG=&gt; P_LONG,
	T_LONG:= T_Long);
	
P_LONG_R_TRIG(CLK:=FB_DETECTPUSH.LONG);
P_LONG_F_TRIG(CLK:=FB_DETECTPUSH.LONG);
	
IF FB_DETECTPUSH.SINGLE AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := 'SINGLE',
		Topic := CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := FALSE
	);
END_IF

IF FB_DETECTPUSH.DOUBLE AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := 'DOUBLE',
		Topic := CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := FALSE
	);
END_IF

IF FB_DETECTPUSH.TP_LONG AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := 'LONG',
		Topic := CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := FALSE
	);
END_IF

IF (P_LONG_R_TRIG.Q OR P_LONG_F_TRIG.Q) AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := BOOL_TO_STRING(FB_DETECTPUSH.LONG),
		Topic := CONCAT(CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),'/P_LONG'),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := TRUE
	);
END_IF</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="InitMqtt" ObjectId="00a19611-db73-47b3-b42c-0ee4b39cb6ec">
              <interface>
                <inputVars>
                  <variable name="MQTTPublishPrefix">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="pMqttPublishQueue">
                    <type>
                      <pointer>
                        <baseType>
                          <derived name="FB_MqttPublishQueue" />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                </inputVars>
                <localVars>
                  <variable name="InstanceNamePt">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.pMqttPublishQueue := pMqttPublishQueue;
THIS^.MqttPublishTopicPrefix := MQTTPublishPrefix;

InstanceNamePt := CommonTypesAndFunctions.FindLastDot(ADR(THIS^.InstanceName)) + 1;
THIS^.MqttPublishTopicSuffix := InstanceNamePt^;

InitMqttDone := TRUE;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="ConfigureFunctionBlock" ObjectId="3c1dd1f8-c260-4341-9424-157bd8992425">
              <interface>
                <inputVars>
                  <variable name="T_Long">
                    <type>
                      <TIME />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Default value for click mode, can be overwritten by method call </xhtml>
                    </documentation>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.T_Long:=T_Long;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>62f7f12e-476b-405b-a551-5cd4cad54a8c</ObjectId>
          </data>
        </addData>
      </pou>
      <pou name="FB_OUTPUT_COVER_MQTT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="UP">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="DN">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="PI">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="PRIO_LOCK">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="PRIO_UP">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="PRIO_DN">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="SENS">
              <type>
                <BYTE />
              </type>
              <initialValue>
                <simpleValue value="1" />
              </initialValue>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="input_constant" Value="" />
                  </Attributes>
                </data>
              </addData>
            </variable>
            <variable name="T_LOCKOUT">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#1s0ms" />
              </initialValue>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="input_constant" Value="" />
                  </Attributes>
                </data>
              </addData>
            </variable>
            <variable name="T_UD">
              <type>
                <TIME />
              </type>
              <initialValue>
                <simpleValue value="TIME#10s0ms" />
              </initialValue>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="input_constant" Value="" />
                  </Attributes>
                </data>
              </addData>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="POS">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="MU">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="MD">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="InstanceName">
              <type>
                <string />
              </type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="instance-path" Value="" />
                    <Attribute Name="noinit" Value="" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> object's full instance name </xhtml>
              </documentation>
            </variable>
            <variable name="Startup">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="TRUE" />
              </initialValue>
            </variable>
            <variable name="InitMqttDone">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="MqttPublishTopicPrefix">
              <type>
                <pointer>
                  <baseType>
                    <string />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="MqttPublishTopicSuffix">
              <type>
                <string length="15" />
              </type>
            </variable>
            <variable name="MQTTSubscribeTopic">
              <type>
                <string length="50" />
              </type>
            </variable>
            <variable name="pMqttPublishQueue">
              <type>
                <pointer>
                  <baseType>
                    <derived name="FB_MqttPublishQueue" />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="FB_ACT">
              <type>
                <derived name="BLIND_ACTUATOR" />
              </type>
            </variable>
            <variable name="delta">
              <type>
                <BYTE />
              </type>
            </variable>
            <variable name="internal_UP">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="internal_DN">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="Qos_POS">
              <type>
                <derived name="SD_MQTT.QoS" />
              </type>
            </variable>
            <variable name="Delta_POS">
              <type>
                <INT />
              </type>
            </variable>
            <variable name="Cover_State">
              <type>
                <derived name="COVER_STATES" />
              </type>
            </variable>
            <variable name="Cover_State_Timer">
              <type>
                <derived name="TOF" />
              </type>
            </variable>
            <variable name="MqttRequestAuto">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="MqttRequestStop">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="MqttRequestCalibrateUp">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="MqttRequestCalibrateDn">
              <type>
                <BOOL />
              </type>
            </variable>
          </localVars>
          <localVars persistent="true">
            <variable name="PreviousPos">
              <type>
                <BYTE />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> To retain position through powercycles</xhtml>
              </documentation>
            </variable>
          </localVars>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/pouinheritance" handleUnknown="implementation">
              <Inheritance>
                <Implements>SD_MQTT.MQTT_SUBSCRIBE_CALLBACK</Implements>
              </Inheritance>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
              <Attributes>
                <Attribute Name="reflection" Value="" />
              </Attributes>
            </data>
          </addData>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">IF Startup THEN
	POS:=PreviousPos;
	FB_ACT.SetPOS(PreviousPos);
END_IF

Cover_State_Timer(PT:=2 * T_UD);
Cover_State_Timer.IN:=FALSE;

CASE Cover_State OF
	COVER_STATES.Idle:
		internal_UP:=FALSE;
		internal_DN:=FALSE;
		//Calculate the next state
		Cover_State := CALC_COVER_STATE(UP:=UP,DN:=DN,PRIO_LOCK:=PRIO_LOCK,PRIO_UP:=PRIO_UP,PRIO_DN:=PRIO_DN,PI:=PI,POS:=POS,MqttRequestAuto:=ADR(MqttRequestAuto),MqttRequestStop:=ADR(MqttRequestStop),MqttRequestCalibrateUp:=ADR(MqttRequestCalibrateUp),MqttRequestCalibrateDn:=ADR(MqttRequestCalibrateDn),CurrentState:=Cover_State,StateTimer:=ADR(Cover_State_Timer));
	COVER_STATES.Prio_up:
		// Only power an engine for maximum twice T_UD
		IF Cover_State_Timer.Q THEN
			internal_UP:=TRUE;
			internal_DN:=FALSE;
		ELSE
			internal_UP:=FALSE;
			internal_DN:=FALSE;
		END_IF
		//Calculate the next state
		Cover_State := CALC_COVER_STATE(UP:=UP,DN:=DN,PRIO_LOCK:=PRIO_LOCK,PRIO_UP:=PRIO_UP,PRIO_DN:=PRIO_DN,PI:=PI,POS:=POS,MqttRequestAuto:=ADR(MqttRequestAuto),MqttRequestStop:=ADR(MqttRequestStop),MqttRequestCalibrateUp:=ADR(MqttRequestCalibrateUp),MqttRequestCalibrateDn:=ADR(MqttRequestCalibrateDn),CurrentState:=Cover_State,StateTimer:=ADR(Cover_State_Timer));
	COVER_STATES.Prio_dn:
		// Only power an engine for maximum twice T_UD
		IF Cover_State_Timer.Q THEN
			internal_UP:=FALSE;
			internal_DN:=TRUE;
		ELSE
			internal_UP:=FALSE;
			internal_DN:=FALSE;
		END_IF
		//Calculate the next state
		Cover_State := CALC_COVER_STATE(UP:=UP,DN:=DN,PRIO_LOCK:=PRIO_LOCK,PRIO_UP:=PRIO_UP,PRIO_DN:=PRIO_DN,PI:=PI,POS:=POS,MqttRequestAuto:=ADR(MqttRequestAuto),MqttRequestStop:=ADR(MqttRequestStop),MqttRequestCalibrateUp:=ADR(MqttRequestCalibrateUp),MqttRequestCalibrateDn:=ADR(MqttRequestCalibrateDn),CurrentState:=Cover_State,StateTimer:=ADR(Cover_State_Timer));
	COVER_STATES.Auto:
		internal_UP:=TRUE;
		internal_DN:=TRUE;
		//Calculate the next state
		Cover_State := CALC_COVER_STATE(UP:=UP,DN:=DN,PRIO_LOCK:=PRIO_LOCK,PRIO_UP:=PRIO_UP,PRIO_DN:=PRIO_DN,PI:=PI,POS:=POS,MqttRequestAuto:=ADR(MqttRequestAuto),MqttRequestStop:=ADR(MqttRequestStop),MqttRequestCalibrateUp:=ADR(MqttRequestCalibrateUp),MqttRequestCalibrateDn:=ADR(MqttRequestCalibrateDn),CurrentState:=Cover_State,StateTimer:=ADR(Cover_State_Timer));
	COVER_STATES.Manual:
		internal_UP:=UP;
		internal_DN:=DN;
		//Calculate the next state
		Cover_State := CALC_COVER_STATE(UP:=UP,DN:=DN,PRIO_LOCK:=PRIO_LOCK,PRIO_UP:=PRIO_UP,PRIO_DN:=PRIO_DN,PI:=PI,POS:=POS,MqttRequestAuto:=ADR(MqttRequestAuto),MqttRequestStop:=ADR(MqttRequestStop),MqttRequestCalibrateUp:=ADR(MqttRequestCalibrateUp),MqttRequestCalibrateDn:=ADR(MqttRequestCalibrateDn),CurrentState:=Cover_State,StateTimer:=ADR(Cover_State_Timer));
	COVER_STATES.Calibrate_up:
		// Only power an engine for maximum twice T_UD
		IF Cover_State_Timer.Q THEN
			internal_UP:=FALSE;
			internal_DN:=TRUE;
		ELSE
			internal_UP:=FALSE;
			internal_DN:=FALSE;
			//Finish the request
			MqttRequestCalibrateUp:=FALSE;
		END_IF
		//Calculate the next state
		Cover_State := CALC_COVER_STATE(UP:=UP,DN:=DN,PRIO_LOCK:=PRIO_LOCK,PRIO_UP:=PRIO_UP,PRIO_DN:=PRIO_DN,PI:=PI,POS:=POS,MqttRequestAuto:=ADR(MqttRequestAuto),MqttRequestStop:=ADR(MqttRequestStop),MqttRequestCalibrateUp:=ADR(MqttRequestCalibrateUp),MqttRequestCalibrateDn:=ADR(MqttRequestCalibrateDn),CurrentState:=Cover_State,StateTimer:=ADR(Cover_State_Timer));
	COVER_STATES.Calibrate_dn:
		// Only power an engine for maximum twice T_UD
		IF Cover_State_Timer.Q THEN
			internal_UP:=FALSE;
			internal_DN:=TRUE;
		ELSE
			internal_UP:=FALSE;
			internal_DN:=FALSE;
			//Finish the request
			MqttRequestCalibrateDn:=FALSE;
		END_IF
		//Calculate the next state
		Cover_State := CALC_COVER_STATE(UP:=UP,DN:=DN,PRIO_LOCK:=PRIO_LOCK,PRIO_UP:=PRIO_UP,PRIO_DN:=PRIO_DN,PI:=PI,POS:=POS,MqttRequestAuto:=ADR(MqttRequestAuto),MqttRequestStop:=ADR(MqttRequestStop),MqttRequestCalibrateUp:=ADR(MqttRequestCalibrateUp),MqttRequestCalibrateDn:=ADR(MqttRequestCalibrateDn),CurrentState:=Cover_State,StateTimer:=ADR(Cover_State_Timer));
	ELSE
		Cover_State:=COVER_STATES.Idle;
END_CASE

(* Check Position*)
FB_ACT(T_UD:=T_UD, T_ANGLE:=T#0S, T_lockout := T_Lockout);

IF internal_UP AND internal_DN THEN
	(* automatic modus detected *)
	(* first find correct position *)
	IF BYTE_TO_INT(FB_ACT.pos) &lt; BYTE_TO_INT(pi) - delta THEN
		FB_ACT.UP := TRUE;
		FB_ACT.DN := FALSE;
		delta := 0;
	ELSIF BYTE_TO_INT(FB_ACT.pos) &gt; BYTE_TO_INT(pi) + delta THEN
		FB_ACT.UP := FALSE;
		FB_ACT.DN := TRUE;
		delta := 0;
	(* correct position reached *)
	ELSE
		FB_ACT.UP := FALSE;
		FB_ACT.DN := FALSE;
		delta := sens;
	END_IF;
ELSE
	FB_ACT.UP := internal_UP;
	FB_ACT.DN := internal_DN;
END_IF;

(* blind control calls blind_actuator *)
FB_ACT(T_UD:=T_UD, T_ANGLE:=T#0S, T_lockout := T_Lockout);
POS := FB_ACT.pos;
MU := FB_ACT.QU;
MD := FB_ACT.QD;

IF (ABS(BYTE_TO_INT(PreviousPos) - BYTE_TO_INT(POS)) &gt;= Delta_POS  OR (MU = FALSE AND MD = FALSE)) AND POS &lt;&gt; PreviousPos OR Startup AND InitMqttDone THEN
	PreviousPos:=POS;
	pMqttPublishQueue^.AddMessage(
		Payload := INT_TO_STRING(REAL_TO_INT(OSCAT_BASIC.SCALE_B(X:=POS, I_LO:=0, I_HI:=255, O_LO:=0, O_HI:=100))),
		Topic := CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),
		Qos := Qos_POS,
		MqttRetain := TRUE
	);
	Startup:=FALSE;
END_IF
</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="InitMqtt" ObjectId="69ba519d-4ac4-4926-b590-ec1f25833098">
              <interface>
                <inputVars>
                  <variable name="MQTTPublishPrefix">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="MQTTSubscribePrefix">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="pMqttPublishQueue">
                    <type>
                      <pointer>
                        <baseType>
                          <derived name="FB_MqttPublishQueue" />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="pMqttCallbackCollector">
                    <type>
                      <pointer>
                        <baseType>
                          <derived name="SD_MQTT.CallbackCollector" />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="Qos_POS">
                    <type>
                      <derived name="SD_MQTT.QoS" />
                    </type>
                  </variable>
                  <variable name="Delta_POS">
                    <type>
                      <INT />
                    </type>
                  </variable>
                </inputVars>
                <localVars>
                  <variable name="InstanceNamePt">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.pMqttPublishQueue := pMqttPublishQueue;
THIS^.MqttPublishTopicPrefix := MQTTPublishPrefix;

InstanceNamePt := CommonTypesAndFunctions.FindLastDot(ADR(THIS^.InstanceName)) + 1;
THIS^.MqttPublishTopicSuffix := InstanceNamePt^;
THIS^.MQTTSubscribeTopic := CONCAT(MQTTSubscribePrefix^ ,THIS^.MqttPublishTopicSuffix);

// register the FB agains the collector so mqtt events can be received
pMqttCallbackCollector^.put(instance:= THIS^);

THIS^.Qos_POS:=Qos_POS;
THIS^.Delta_POS:=REAL_TO_INT(OSCAT_BASIC.SCALE_B(X:=INT_TO_BYTE(Delta_POS), I_LO:=0, I_HI:=100, O_LO:=0, O_HI:=255));

InitMqttDone := TRUE;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="PublishReceived" ObjectId="58832cec-c5c1-4a80-93d6-f1f3f87f820d">
              <interface>
                <returnType>
                  <BOOL />
                </returnType>
                <inputVars>
                  <variable name="Data">
                    <type>
                      <derived name="SD_MQTT.CALLBACK_DATA" />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml">Collection of recived Data</xhtml>
                    </documentation>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">//first check if Mqtt is initialized, otherwise do nothing
IF NOT(InitMqttDone) THEN
	//mark the interface call from the collector as done
	PublishReceived := TRUE;
//check if the packet is for this FB
ELSIF CommonTypesAndFunctions.StrEquals(str1:= ADR(MQTTSubscribeTopic), str2:= Data.TopicOut) THEN
	//mark the interface call from the collector as done
	PublishReceived := TRUE;
	//now process the data
	IF CommonTypesAndFunctions.StrEquals(str1:= Data.PayloadString, str2:= ADR('STOP')) THEN			
		THIS^.MqttRequestStop:=TRUE;
	ELSIF CommonTypesAndFunctions.StrEquals(str1:= Data.PayloadString, str2:= ADR('OPEN')) THEN
		THIS^.PI:=255;
		THIS^.MqttRequestAuto:=TRUE;
	ELSIF CommonTypesAndFunctions.StrEquals(str1:= Data.PayloadString, str2:= ADR('CLOSE')) THEN		
		THIS^.PI:=0;
		THIS^.MqttRequestAuto:=TRUE;
	ELSIF CommonTypesAndFunctions.StrEquals(str1:= Data.PayloadString, str2:= ADR('CAL_UP')) THEN
		THIS^.MqttRequestCalibrateUp:=TRUE;
	ELSIF CommonTypesAndFunctions.StrEquals(str1:= Data.PayloadString, str2:= ADR('CAL_DN')) THEN
		THIS^.MqttRequestCalibrateDn:=TRUE;
	ELSIF OSCAT_BASIC.IS_NUM(str:= Data.PayloadString^) THEN
		THIS^.PI:=REAL_TO_BYTE(OSCAT_BASIC.SCALE_B(X:=STRING_TO_BYTE(Data.PayloadString^), I_LO:=0, I_HI:=100, O_LO:=0, O_HI:=255));
		THIS^.MqttRequestAuto:=TRUE;
	END_IF

END_IF </xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="ConfigureFunctionBlock" ObjectId="f6efc662-2624-473c-8772-d4c15aca0749">
              <interface>
                <returnType>
                  <BOOL />
                </returnType>
                <inputVars>
                  <variable name="T_LOCKOUT">
                    <type>
                      <TIME />
                    </type>
                  </variable>
                  <variable name="T_UD">
                    <type>
                      <TIME />
                    </type>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.T_LOCKOUT:=T_LOCKOUT;
THIS^.T_UD:=T_UD;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>4e689137-5de5-465f-8bfe-2a0e858be318</ObjectId>
          </data>
        </addData>
      </pou>
      <pou name="FB_OUTPUT_SWITCH_MQTT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="PRIO_HIGH">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="FALSE" />
              </initialValue>
            </variable>
            <variable name="PRIO_LOW">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="FALSE" />
              </initialValue>
            </variable>
            <variable name="TOGGLE">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="FALSE" />
              </initialValue>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="OUT">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="InstanceName">
              <type>
                <string />
              </type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="instance-path" Value="" />
                    <Attribute Name="noinit" Value="" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> object's full instance name </xhtml>
              </documentation>
            </variable>
            <variable name="Startup">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="TRUE" />
              </initialValue>
            </variable>
            <variable name="InitMqttDone">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="MqttPublishTopicPrefix">
              <type>
                <pointer>
                  <baseType>
                    <string />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="MqttPublishTopicSuffix">
              <type>
                <string length="15" />
              </type>
            </variable>
            <variable name="MQTTSubscribeTopic">
              <type>
                <string length="50" />
              </type>
            </variable>
            <variable name="pMqttPublishQueue">
              <type>
                <pointer>
                  <baseType>
                    <derived name="FB_MqttPublishQueue" />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="MqttHighRequest">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="MqttLowRequest">
              <type>
                <BOOL />
              </type>
            </variable>
          </localVars>
          <localVars persistent="true">
            <variable name="PreviousState">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> To retain output state through powercycles</xhtml>
              </documentation>
            </variable>
          </localVars>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/pouinheritance" handleUnknown="implementation">
              <Inheritance>
                <Implements>SD_MQTT.MQTT_SUBSCRIBE_CALLBACK</Implements>
              </Inheritance>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
              <Attributes>
                <Attribute Name="reflection" Value="" />
              </Attributes>
            </data>
          </addData>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">IF Startup THEN
	OUT := PreviousState;
END_IF

IF PRIO_HIGH THEN
	OUT:=TRUE;
ELSIF(PRIO_LOW AND NOT (PRIO_HIGH)) THEN
	OUT:= FALSE;
ELSIF MqttHighRequest THEN
	OUT:= TRUE;
	MqttHighRequest := FALSE;
	MqttLowRequest := FALSE;
ELSIF MqttLowRequest THEN
	OUT:= FALSE;
	MqttHighRequest := FALSE;
	MqttLowRequest := FALSE;
ELSIF(TOGGLE) THEN
	OUT:=NOT(OUT);
END_IF;

IF(PreviousState &lt;&gt; OUT) OR Startup AND InitMqttDone THEN
	pMqttPublishQueue^.AddMessage(
		Payload := BOOL_TO_STRING(OUT),
		Topic := CONCAT(MqttPublishTopicPrefix^, MqttPublishTopicSuffix),
		Qos := SD_MQTT.QoS.ExactlyOnce,
		MqttRetain := TRUE
	);	
	Startup:=FALSE;
END_IF	

PreviousState := OUT;</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="InitMqtt" ObjectId="47d3e400-9d5e-4ef2-8076-8a554afda954">
              <interface>
                <inputVars>
                  <variable name="MQTTPublishPrefix">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="MQTTSubscribePrefix">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="pMqttPublishQueue">
                    <type>
                      <pointer>
                        <baseType>
                          <derived name="FB_MqttPublishQueue" />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="pMqttCallbackCollector">
                    <type>
                      <pointer>
                        <baseType>
                          <derived name="SD_MQTT.CallbackCollector" />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                </inputVars>
                <localVars>
                  <variable name="InstanceNamePt">
                    <type>
                      <pointer>
                        <baseType>
                          <string />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.pMqttPublishQueue := pMqttPublishQueue;
THIS^.MqttPublishTopicPrefix := MQTTPublishPrefix;

InstanceNamePt := CommonTypesAndFunctions.FindLastDot(ADR(THIS^.InstanceName)) + 1;
THIS^.MqttPublishTopicSuffix := InstanceNamePt^;
THIS^.MQTTSubscribeTopic := CONCAT(MQTTSubscribePrefix^ ,THIS^.MqttPublishTopicSuffix);

// register the FB agains the collector so mqtt events can be received
pMqttCallbackCollector^.put(instance:= THIS^);

InitMqttDone := TRUE;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="PublishReceived" ObjectId="20ce667b-61fa-410b-9c54-745ea0d5e8ae">
              <interface>
                <returnType>
                  <BOOL />
                </returnType>
                <inputVars>
                  <variable name="Data">
                    <type>
                      <derived name="SD_MQTT.CALLBACK_DATA" />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml">Collection of recived Data</xhtml>
                    </documentation>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">//first check if Mqtt is initialized, otherwise do nothing
IF NOT(InitMqttDone) THEN
	//mark the interface call from the collector as done
	PublishReceived := TRUE;
//check if the packet is for this FB
ELSIF CommonTypesAndFunctions.StrEquals(str1:= ADR(MQTTSubscribeTopic), str2:= Data.TopicOut) THEN
	//mark the interface call from the collector as done
	PublishReceived := TRUE;
	//now process the data
	IF CommonTypesAndFunctions.StrEquals(str1:= Data.PayloadString, str2:= ADR('TRUE')) THEN
		MqttHighRequest := TRUE;
	END_IF
	IF CommonTypesAndFunctions.StrEquals(str1:= Data.PayloadString, str2:= ADR('FALSE')) THEN
		MqttLowRequest := TRUE;
	END_IF
END_IF </xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>3f52d08f-9a82-49ed-a942-f43debc60cb3</ObjectId>
          </data>
        </addData>
      </pou>
      <pou name="FB_MqttPublishQueue" pouType="functionBlock">
        <interface>
          <outputVars>
            <variable name="EMPTY">
              <type>
                <BOOL />
              </type>
              <initialValue>
                <simpleValue value="TRUE" />
              </initialValue>
            </variable>
            <variable name="FULL">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="localMessage">
              <type>
                <derived name="MQTT_MESSAGE" />
              </type>
            </variable>
            <variable name="fifo">
              <type>
                <array>
                  <dimension lower="0" upper="n" />
                  <baseType>
                    <derived name="MQTT_MESSAGE" />
                  </baseType>
                </array>
              </type>
            </variable>
            <variable name="pr">
              <type>
                <INT />
              </type>
            </variable>
            <variable name="pw">
              <type>
                <INT />
              </type>
            </variable>
          </localVars>
          <localVars constant="true">
            <variable name="n">
              <type>
                <INT />
              </type>
              <initialValue>
                <simpleValue value="1024" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> changing this value will chage the number of stored elements in the fifo </xhtml>
              </documentation>
            </variable>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml" />
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="GetMessage" ObjectId="529fd411-4cec-4e8b-a6d3-21697c77c815">
              <interface>
                <returnType>
                  <derived name="MQTT_MESSAGE" />
                </returnType>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">IF NOT EMPTY THEN
	GetMessage := fifo[pr];
	pr := OSCAT_BASIC.INC1(pr,n);
	EMPTY := pr = pw;
	FULL := FALSE;
END_IF;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="AddMessage" ObjectId="a0b946f4-b684-4e79-adac-e0bf13ee9531">
              <interface>
                <inputVars>
                  <variable name="Payload">
                    <type>
                      <string length="128" />
                    </type>
                  </variable>
                  <variable name="Topic">
                    <type>
                      <string length="128" />
                    </type>
                  </variable>
                  <variable name="Qos">
                    <type>
                      <derived name="SD_MQTT.QoS" />
                    </type>
                  </variable>
                  <variable name="MqttRetain">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">IF NOT FULL THEN
	localMessage.Payload := Payload;
	localMessage.Topic := Topic;
	localMessage.Qos := Qos;
	localMessage.MqttRetain := MqttRetain;
	fifo[pw] := localMessage;
	pw := OSCAT_BASIC.INC1(pw,n);
	FULL := pw = pr;
	EMPTY := FALSE;
END_IF;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="Reset" ObjectId="175faf63-9a69-4df0-99e5-748386e48903">
              <interface />
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">pw := pr;
FULL := FALSE;
EMPTY := TRUE;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>90e71aee-edab-434c-affe-fdf28a1fee58</ObjectId>
          </data>
        </addData>
      </pou>
      <pou name="FB_MqttPublishWorker" pouType="functionBlock">
        <interface>
          <outputVars>
            <variable name="SendDone">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="LocalMqttMessage">
              <type>
                <derived name="MQTT_MESSAGE" />
              </type>
            </variable>
            <variable name="InitDone">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="RequestToSend">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="Send">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="publish">
              <type>
                <derived name="SD_MQTT.MQTTPublish" />
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">//need to call publish here because of FB nums
publish(
	Topic:= ADR(LocalMqttMessage.Topic), 
	PayloadString:= ADR(LocalMqttMessage.Payload), 
	PublishAsString:= TRUE, 
	QoSIn:= LocalMqttMessage.Qos, 
	MRetain:= LocalMqttMessage.MqttRetain, 
	send:= Send);
	
IF NOT InitDone THEN RETURN; END_IF

IF RequestToSend THEN
	Send := TRUE;
	SendDone := FALSE;
END_IF

IF publish.done THEN
	 SendDone := TRUE;
	 RequestToSend:=FALSE;
	 Send:=FALSE;
END_IF</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="Init" ObjectId="6b327d4f-cdfc-4c3c-8193-3a61f98460d0">
              <interface>
                <inputVars>
                  <variable name="inputMQTT_IN_OUT">
                    <type>
                      <pointer>
                        <baseType>
                          <derived name="SD_MQTT.MQTT_IN_OUT" />
                        </baseType>
                      </pointer>
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml">Pointer MQTTT exchange strucure</xhtml>
                    </documentation>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">publish.SetMqttInOut(MQTT_IN_OUT := inputMQTT_IN_OUT);

InitDone := TRUE;
SendDone := TRUE;
</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="PublishMessage" ObjectId="360ac381-546e-4086-9f4f-da87b5c10db3">
              <interface>
                <inputVars>
                  <variable name="MqttMessage">
                    <type>
                      <derived name="MQTT_MESSAGE" />
                    </type>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">LocalMqttMessage := MqttMessage;

RequestToSend:=TRUE;</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>3a2ea79a-b707-4456-b254-28657fc0459d</ObjectId>
          </data>
        </addData>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations>
      <configuration name="Device">
        <resource name="HomeAutomation">
          <task name="MainTask" interval="PT0.02S" priority="0">
            <pouInstance name="PLC_PRG_MAIN" typeName="">
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml" />
              </documentation>
            </pouInstance>
            <addData>
              <data name="http://www.3s-software.com/plcopenxml/tasksettings" handleUnknown="implementation">
                <TaskSettings KindOfTask="Cyclic" Interval="t#20ms" IntervalUnit="ms" WithinSPSTimeSlicing="true">
                  <Watchdog Enabled="false" TimeUnit="ms" Sensitivity="1" />
                </TaskSettings>
              </data>
              <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                <ObjectId>3105d1e0-925d-4f28-aadf-e5d4d663e807</ObjectId>
              </data>
            </addData>
          </task>
          <task name="MqttCommunication" priority="1">
            <pouInstance name="PLC_PRG_MQTT" typeName="">
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml" />
              </documentation>
            </pouInstance>
            <addData>
              <data name="http://www.3s-software.com/plcopenxml/tasksettings" handleUnknown="implementation">
                <TaskSettings KindOfTask="Freewheeling" Interval="t#20ms" IntervalUnit="ms" WithinSPSTimeSlicing="true">
                  <Watchdog Enabled="false" TimeUnit="ms" Sensitivity="1" />
                </TaskSettings>
              </data>
              <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                <ObjectId>697fd9f7-7f03-439d-a4ee-169b615acbda</ObjectId>
              </data>
            </addData>
          </task>
          <globalVars name="MqttVariables">
            <variable name="fbMqttPublishQueue">
              <type>
                <derived name="FB_MqttPublishQueue" />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Shared Variables for MQTT publish communication </xhtml>
              </documentation>
            </variable>
            <variable name="collector_FB_OUTPUT_SWITCH_MQTT">
              <type>
                <derived name="SD_MQTT.CallbackCollector" />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Shared Variables for MQTT subscribe communication </xhtml>
              </documentation>
            </variable>
            <variable name="collector_FB_OUTPUT_COVER_MQTT">
              <type>
                <derived name="SD_MQTT.CallbackCollector" />
              </type>
            </variable>
            <addData>
              <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                <Attributes>
                  <Attribute Name="qualified_only" Value="" />
                </Attributes>
              </data>
              <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                <ObjectId>4f9cb91a-49cd-4924-912b-f57a11772a7e</ObjectId>
              </data>
            </addData>
          </globalVars>
          <globalVars name="PersistentVars">
            <addData>
              <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                <Attributes>
                  <Attribute Name="qualified_only" Value="" />
                </Attributes>
              </data>
              <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                <ObjectId>75fbe56d-b36e-4d1d-a520-902891aa15d6</ObjectId>
              </data>
            </addData>
          </globalVars>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
              <pou name="PLC_PRG_MAIN" pouType="program">
                <interface>
                  <localVars>
                    <variable name="MqttPushbuttonPrefix">
                      <type>
                        <string length="100" />
                      </type>
                      <initialValue>
                        <simpleValue value="'WAGO-PFC200/Out/DigitalInputs/Pushbuttons/'" />
                      </initialValue>
                      <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> INPUT FUNCTION BLOCKS </xhtml>
                      </documentation>
                    </variable>
                    <variable name="FB_DI_PB_001">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_002">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_003">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_004">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_005">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_006">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_007">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_008">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_009">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_DIMMER_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_010">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_011">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_012">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_013">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_014">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_015">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_016">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_017">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_018">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_019">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_020">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_021">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_022">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_023">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_024">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_025">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_026">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_027">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_028">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_029">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_030">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_031">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_032">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_033">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_034">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_035">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_036">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_037">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_038">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_039">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_040">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_041">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_042">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_043">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_044">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_045">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_046">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_047">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DI_PB_048">
                      <type>
                        <derived name="FB_INPUT_PUSHBUTTON_MQTT" />
                      </type>
                    </variable>
                    <variable name="MqttPubSwitchPrefix">
                      <type>
                        <string length="100" />
                      </type>
                      <initialValue>
                        <simpleValue value="'WAGO-PFC200/Out/DigitalOutputs/'" />
                      </initialValue>
                      <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> OUTPUT FUNCTION BLOCKS </xhtml>
                      </documentation>
                    </variable>
                    <variable name="MqttSubSwitchPrefix">
                      <type>
                        <string length="100" />
                      </type>
                      <initialValue>
                        <simpleValue value="'WAGO-PFC200/In/DigitalOutputs/'" />
                      </initialValue>
                    </variable>
                    <variable name="FB_DO_SW_001">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_002">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_003">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_004">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_005">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_006">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_007">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_008">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_009">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_010">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_011">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_012">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_013">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_014">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_015">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_016">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_017">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_018">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_019">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_020">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_021">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_022">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_023">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_024">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_025">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_026">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_027">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_028">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_029">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_030">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_031">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="FB_DO_SW_032">
                      <type>
                        <derived name="FB_OUTPUT_SWITCH_MQTT" />
                      </type>
                    </variable>
                    <variable name="MqttPubCoverPrefix">
                      <type>
                        <string length="100" />
                      </type>
                      <initialValue>
                        <simpleValue value="'WAGO-PFC200/Out/Covers/'" />
                      </initialValue>
                      <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> COVER FUNCTION BLOCKS </xhtml>
                      </documentation>
                    </variable>
                    <variable name="MqttSubCoverPrefix">
                      <type>
                        <string length="100" />
                      </type>
                      <initialValue>
                        <simpleValue value="'WAGO-PFC200/In/Covers/'" />
                      </initialValue>
                    </variable>
                    <variable name="FB_DO_COVER_001">
                      <type>
                        <derived name="FB_OUTPUT_COVER_MQTT" />
                      </type>
                    </variable>
                  </localVars>
                </interface>
                <actions>
                  <action name="WRITE_SWITCHES">
                    <body>
                      <ST>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml">FB_DO_SW_001(OUT	=&gt;		DO_001,										(* couple the function block to the physical output *)
	PRIO_HIGH				:=FALSE,  									(* brings the output high regardless of other input values *)
	PRIO_LOW				:=FALSE, 									(* brings the output low regardless of other input values. NOTE: PRIO_HIGH overrules PRIO_LOW input *)
	TOGGLE					:=FB_DI_PB_009.SINGLE 						(* for toggling the output *)	
);

FB_DO_SW_002(OUT =&gt; DO_002		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FB_DI_PB_009.DOUBLE	);
FB_DO_SW_003(OUT =&gt; DO_003		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FB_DI_PB_009.LONG		);
FB_DO_SW_004(OUT =&gt; DO_004		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FB_DI_PB_009.LONG		);
FB_DO_SW_005(OUT =&gt; DO_005		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FB_DI_PB_009.LONG		);
FB_DO_SW_006(OUT =&gt; DO_006		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FB_DI_PB_009.LONG		);
FB_DO_SW_007(OUT =&gt; DO_007		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FB_DI_PB_009.LONG		);
FB_DO_SW_008(OUT =&gt; DO_008		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FB_DI_PB_009.LONG		);
FB_DO_SW_009(OUT =&gt; DO_009		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_010(OUT =&gt; DO_010		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_011(OUT =&gt; DO_011		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_012(OUT =&gt; DO_012		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_013(OUT =&gt; DO_013		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_014(OUT =&gt; DO_014		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_015(OUT =&gt; DO_015		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_016(OUT =&gt; DO_016		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_017(OUT =&gt; DO_017		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_018(OUT =&gt; DO_018		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_019(OUT =&gt; DO_019		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_020(OUT =&gt; DO_020		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_021(OUT =&gt; DO_021		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_022(OUT =&gt; DO_022		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_023(OUT =&gt; DO_023		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_024(OUT =&gt; DO_024		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_025(OUT =&gt; DO_025		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_026(OUT =&gt; DO_026		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_027(OUT =&gt; DO_027		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_028(OUT =&gt; DO_028		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_029(OUT =&gt; DO_029		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
FB_DO_SW_030(OUT =&gt; DO_030		,PRIO_HIGH:=FALSE			,PRIO_LOW:=FALSE				,TOGGLE:=FALSE				);
</xhtml>
                      </ST>
                    </body>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                        <ObjectId>bc43bd28-4a8e-408d-8fdd-b4f45ff42b62</ObjectId>
                      </data>
                    </addData>
                  </action>
                  <action name="READ_PUSHBUTTONS">
                    <body>
                      <ST>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml">FB_DI_PB_001(PB:= DI_001); (* Provide the input FB the correct phyical input to validate each cyclus *)
FB_DI_PB_002(PB:= DI_002);
FB_DI_PB_003(PB:= DI_003);
FB_DI_PB_004(PB:= DI_004);
FB_DI_PB_005(PB:= DI_005);
FB_DI_PB_006(PB:= DI_006);
FB_DI_PB_007(PB:= DI_007);
FB_DI_PB_008(PB:= DI_008);
FB_DI_PB_009(PB:= DI_009);
FB_DI_PB_010(PB:= DI_010);
FB_DI_PB_011(PB:= DI_011);
FB_DI_PB_012(PB:= DI_012);
FB_DI_PB_013(PB:= DI_013);
FB_DI_PB_014(PB:= DI_014);
FB_DI_PB_015(PB:= DI_015);
FB_DI_PB_016(PB:= DI_016);
FB_DI_PB_017(PB:= DI_017);
FB_DI_PB_018(PB:= DI_018);
FB_DI_PB_019(PB:= DI_019);
FB_DI_PB_020(PB:= DI_020);
FB_DI_PB_021(PB:= DI_021);
FB_DI_PB_022(PB:= DI_022);
FB_DI_PB_023(PB:= DI_023);
FB_DI_PB_024(PB:= DI_024);
FB_DI_PB_025(PB:= DI_025);
FB_DI_PB_026(PB:= DI_026);
FB_DI_PB_027(PB:= DI_027);
FB_DI_PB_028(PB:= DI_028);
FB_DI_PB_029(PB:= DI_029);
FB_DI_PB_030(PB:= DI_030);
FB_DI_PB_031(PB:= DI_031);
FB_DI_PB_032(PB:= DI_032);
FB_DI_PB_033(PB:= DI_033);
FB_DI_PB_034(PB:= DI_034);
FB_DI_PB_035(PB:= DI_035);
FB_DI_PB_036(PB:= DI_036);
FB_DI_PB_037(PB:= DI_037);
FB_DI_PB_038(PB:= DI_038);
FB_DI_PB_039(PB:= DI_039);
FB_DI_PB_040(PB:= DI_040);
FB_DI_PB_041(PB:= DI_041);
FB_DI_PB_042(PB:= DI_042);
FB_DI_PB_043(PB:= DI_043);
FB_DI_PB_044(PB:= DI_044);
FB_DI_PB_045(PB:= DI_045);
FB_DI_PB_046(PB:= DI_046);
FB_DI_PB_047(PB:= DI_047);
FB_DI_PB_048(PB:= DI_048);</xhtml>
                      </ST>
                    </body>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                        <ObjectId>72c511d1-ce6f-4b43-a80f-bcc4f298eb89</ObjectId>
                      </data>
                    </addData>
                  </action>
                  <action name="MAIN_INIT">
                    <body>
                      <ST>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml">(* INIT DIGITAL INPUT STUFF *)
FB_DI_PB_001.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	(* pointer to string prefix for the mqtt publish topic *)
	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue)		(* pointer to MqttPublishQueue to send a new Mqtt event *)
);
FB_DI_PB_002.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_003.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_004.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_005.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_006.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_007.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_008.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_009.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), TRUE, SD_MQTT.QoS.ExactlyOnce, 5);
FB_DI_PB_010.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_011.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_012.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_013.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_014.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_015.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));
FB_DI_PB_016.InitMqtt(MQTTPublishPrefix:= ADR(MqttPushbuttonPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue));

(* INIT DIGITAL OUTPUT STUFF *)
FB_DO_SW_001.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),					(* pointer to string prefix for the mqtt publish topic *)
	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix),									(* pointer to string prefix for the mqtt subscribe topic *)
	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue),						(* pointer to MqttPublishQueue to send a new Mqtt event *)
	pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT)	(* pointer to CallbackCollector to receive Mqtt subscription events *)
);
FB_DO_SW_002.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_003.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_004.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_005.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_006.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_007.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_008.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_009.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_010.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_011.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix),	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_012.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_013.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_014.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_015.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_016.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_017.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_018.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_019.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_020.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_021.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_022.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_023.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_024.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_025.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_026.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_027.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_028.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_029.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));
FB_DO_SW_030.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubSwitchPrefix),	MQTTSubscribePrefix:= ADR(MqttSubSwitchPrefix), pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue), pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT));

(* INIT COVERS STUFF *)
FB_DO_COVER_001.InitMqtt(MQTTPublishPrefix:= ADR(MqttPubCoverPrefix),				(* pointer to string prefix for the mqtt publish topic *)
	MQTTSubscribePrefix:= ADR(MqttSubCoverPrefix),									(* pointer to string prefix for the mqtt subscribe topic *)
	pMqttPublishQueue := ADR(MqttVariables.fbMqttPublishQueue),						(* pointer to MqttPublishQueue to send a new Mqtt event *)
	pMqttCallbackCollector := ADR(MqttVariables.collector_FB_OUTPUT_COVER_MQTT), 	(* pointer to CallbackCollector to receive Mqtt subscription events *)
	SD_MQTT.QoS.ExactlyOnce, 														(* specify the QoS for the POS mqtt events (values 0-100) *)
	2																				(* specify the resolution for the POS mqtt events *)
);

FB_DO_COVER_001.ConfigureFunctionBlock(T_LOCKOUT:=T#1S,								(* delay between change of direction *)
	T_UD:=T#20S																		(* run time to move the cover completely up/down *)
);</xhtml>
                      </ST>
                    </body>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                        <ObjectId>f5b06497-3f42-4150-9639-33f5f16d160a</ObjectId>
                      </data>
                    </addData>
                  </action>
                  <action name="MOVE_COVERS">
                    <body>
                      <ST>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml">FB_DO_COVER_001(
	UP:=FB_DI_PB_013.P_LONG,
	DN:=FB_DI_PB_015.P_LONG,
	MU=&gt;DO_031,
	MD=&gt;DO_032	
	);</xhtml>
                      </ST>
                    </body>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                        <ObjectId>0179406e-0243-4248-bd15-86bda23b0ead</ObjectId>
                      </data>
                    </addData>
                  </action>
                </actions>
                <body>
                  <SFC>
                    <step localId="0" initialStep="true" name="Init">
                      <position x="0" y="0" />
                      <connectionPointIn />
                      <connectionPointOut formalParameter="sfc" />
                      <connectionPointOutAction formalParameter="x" />
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                          <attributes xmlns="">
                            <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">Init</attribute>
                            <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                            <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                            <attribute guid="6844a48e-46c2-4cc8-a185-a478f3b99cc0">TRUE</attribute>
                            <attribute guid="62e1754b-7629-4e63-9cec-10ae0c536f1f">FALSE</attribute>
                          </attributes>
                        </data>
                      </addData>
                    </step>
                    <actionBlock localId="2">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="0" />
                      </connectionPointIn>
                      <action localId="1" qualifier="N" duration="" indicator="">
                        <relPosition x="0" y="0" />
                        <reference name="MAIN_INIT" />
                        <connectionPointOut />
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                            <attributes xmlns="">
                              <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">MAIN_INIT</attribute>
                              <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                              <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                              <attribute guid="e174fc0d-80b0-4a9e-a530-ca239c249a50">N</attribute>
                            </attributes>
                          </data>
                        </addData>
                      </action>
                    </actionBlock>
                    <inVariable localId="3">
                      <position x="0" y="0" />
                      <connectionPointOut />
                      <expression>True</expression>
                    </inVariable>
                    <transition localId="4">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="0" formalParameter="sfc" />
                      </connectionPointIn>
                      <condition>
                        <connectionPointIn>
                          <connection refLocalId="3" />
                        </connectionPointIn>
                      </condition>
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                          <attributes xmlns="">
                            <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">True</attribute>
                            <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                            <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                            <attribute guid="62e1754b-7629-4e63-9cec-10ae0c536f1f">FALSE</attribute>
                            <attribute guid="8294df19-5962-4dee-a874-1051dabb0e3e">0</attribute>
                          </attributes>
                        </data>
                      </addData>
                    </transition>
                    <step localId="5" name="Main">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="4" />
                      </connectionPointIn>
                      <connectionPointOut formalParameter="sfc" />
                      <connectionPointOutAction formalParameter="x" />
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                          <attributes xmlns="">
                            <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">Main</attribute>
                            <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                            <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                            <attribute guid="6844a48e-46c2-4cc8-a185-a478f3b99cc0">FALSE</attribute>
                            <attribute guid="62e1754b-7629-4e63-9cec-10ae0c536f1f">FALSE</attribute>
                          </attributes>
                        </data>
                      </addData>
                    </step>
                    <actionBlock localId="9">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="5" />
                      </connectionPointIn>
                      <action localId="6" qualifier="N" duration="" indicator="">
                        <relPosition x="0" y="0" />
                        <reference name="READ_PUSHBUTTONS" />
                        <connectionPointOut />
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                            <attributes xmlns="">
                              <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">READ_PUSHBUTTONS</attribute>
                              <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                              <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                              <attribute guid="e174fc0d-80b0-4a9e-a530-ca239c249a50">N</attribute>
                            </attributes>
                          </data>
                        </addData>
                      </action>
                      <action localId="7" qualifier="N" duration="" indicator="">
                        <relPosition x="0" y="0" />
                        <reference name="WRITE_SWITCHES" />
                        <connectionPointOut />
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                            <attributes xmlns="">
                              <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">WRITE_SWITCHES</attribute>
                              <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                              <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                              <attribute guid="e174fc0d-80b0-4a9e-a530-ca239c249a50">N</attribute>
                            </attributes>
                          </data>
                        </addData>
                      </action>
                      <action localId="8" qualifier="N" duration="" indicator="">
                        <relPosition x="0" y="0" />
                        <reference name="MOVE_COVERS" />
                        <connectionPointOut />
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                            <attributes xmlns="">
                              <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">MOVE_COVERS</attribute>
                              <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                              <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                              <attribute guid="e174fc0d-80b0-4a9e-a530-ca239c249a50">N</attribute>
                            </attributes>
                          </data>
                        </addData>
                      </action>
                    </actionBlock>
                    <inVariable localId="10">
                      <position x="0" y="0" />
                      <connectionPointOut />
                      <expression>TRUE</expression>
                    </inVariable>
                    <transition localId="11">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="5" formalParameter="sfc" />
                      </connectionPointIn>
                      <condition>
                        <connectionPointIn>
                          <connection refLocalId="10" />
                        </connectionPointIn>
                      </condition>
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                          <attributes xmlns="">
                            <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">TRUE</attribute>
                            <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                            <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                            <attribute guid="62e1754b-7629-4e63-9cec-10ae0c536f1f">FALSE</attribute>
                            <attribute guid="8294df19-5962-4dee-a874-1051dabb0e3e">0</attribute>
                          </attributes>
                        </data>
                      </addData>
                    </transition>
                    <jumpStep localId="12" targetName="Main">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="11" />
                      </connectionPointIn>
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                          <attributes xmlns="">
                            <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">Main</attribute>
                            <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                          </attributes>
                        </data>
                      </addData>
                    </jumpStep>
                  </SFC>
                </body>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/sfcsettings" handleUnknown="implementation">
                    <SFCSettings>
                      <LibTitle>IecSfc</LibTitle>
                      <LibCompany>System</LibCompany>
                      <LibVersion>3.4.2.0</LibVersion>
                      <LibNamespace>IecSfc</LibNamespace>
                      <CalcActiveTransOnly>false</CalcActiveTransOnly>
                      <UseDefaults>false</UseDefaults>
                      <Flags>
                        <EnableLimit Declare="true" Use="false" />
                        <Init Declare="true" Use="false" />
                        <Reset Declare="true" Use="false" />
                        <QuitError Declare="true" Use="false" />
                        <Pause Declare="true" Use="false" />
                        <Error Declare="true" Use="false" />
                        <Trans Declare="true" Use="false" />
                        <ErrorStep Declare="true" Use="false" />
                        <ErrorPOU Declare="true" Use="false" />
                        <CurrentStep Declare="true" Use="false" />
                        <Tip Declare="true" Use="false" />
                        <TipMode Declare="true" Use="false" />
                        <MaxFlags Declare="true" Use="false" />
                        <SFCErrorAnalyzation Declare="true" Use="false" />
                        <SFCErrorAnalyzationTable Declare="true" Use="false" />
                      </Flags>
                    </SFCSettings>
                  </data>
                  <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                    <ObjectId>98c8b3af-823f-460e-96b4-4a3a11616ef1</ObjectId>
                  </data>
                </addData>
              </pou>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
              <pou name="PLC_PRG_MQTT" pouType="program">
                <interface>
                  <localVars>
                    <variable name="broker">
                      <type>
                        <string />
                      </type>
                      <initialValue>
                        <simpleValue value="'192.168.1.36:1883'" />
                      </initialValue>
                      <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> variables for MQTT configuration </xhtml>
                      </documentation>
                    </variable>
                    <variable name="clientID">
                      <type>
                        <string />
                      </type>
                      <initialValue>
                        <simpleValue value="'WAGO-PFC200'" />
                      </initialValue>
                      <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> use the below for username password authentication to broker 
 broker					:STRING:='user:password@192.168.1.36:1883'; </xhtml>
                      </documentation>
                    </variable>
                    <variable name="MQTTClient">
                      <type>
                        <derived name="SD_MQTT.HANDLE_MQTT" />
                      </type>
                    </variable>
                    <variable name="MQTT_IN_OUT">
                      <type>
                        <derived name="SD_MQTT.MQTT_IN_OUT" />
                      </type>
                    </variable>
                    <variable name="MQTTInfo">
                      <type>
                        <derived name="SD_MQTT.MQTT_INFO" />
                      </type>
                    </variable>
                    <variable name="MQTTLwtTopic">
                      <type>
                        <string />
                      </type>
                      <initialValue>
                        <simpleValue value="'Devices/WAGO-PFC200/availability'" />
                      </initialValue>
                    </variable>
                    <variable name="MQTTLwtPayload">
                      <type>
                        <string />
                      </type>
                      <initialValue>
                        <simpleValue value="'offline'" />
                      </initialValue>
                    </variable>
                    <variable name="MQTTBirthMessage">
                      <type>
                        <derived name="MQTT_MESSAGE" />
                      </type>
                    </variable>
                    <variable name="MQTTBirthTopic">
                      <type>
                        <string />
                      </type>
                      <initialValue>
                        <simpleValue value="'Devices/WAGO-PFC200/availability'" />
                      </initialValue>
                    </variable>
                    <variable name="MQTTBirthPayload">
                      <type>
                        <string />
                      </type>
                      <initialValue>
                        <simpleValue value="'online'" />
                      </initialValue>
                    </variable>
                    <variable name="MQTTBirthHartbeat">
                      <type>
                        <derived name="OSCAT_BASIC.GEN_PULSE" />
                      </type>
                    </variable>
                    <variable name="MQTTBirthHartbeatTime">
                      <type>
                        <TIME />
                      </type>
                      <initialValue>
                        <simpleValue value="TIME#5s0ms" />
                      </initialValue>
                    </variable>
                    <variable name="MQTTConnectTrigger">
                      <type>
                        <derived name="Standard.R_TRIG" />
                      </type>
                    </variable>
                    <variable name="MQTTPublishBirth">
                      <type>
                        <BOOL />
                      </type>
                      <initialValue>
                        <simpleValue value="TRUE" />
                      </initialValue>
                    </variable>
                    <variable name="MQTTBirthPublisher">
                      <type>
                        <derived name="FB_MqttPublishWorker" />
                      </type>
                    </variable>
                    <variable name="initMqtt">
                      <type>
                        <BOOL />
                      </type>
                      <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> variables for MQTT setup </xhtml>
                      </documentation>
                    </variable>
                    <variable name="icounter">
                      <type>
                        <UDINT />
                      </type>
                    </variable>
                    <variable name="ipublishers">
                      <type>
                        <UDINT />
                      </type>
                      <initialValue>
                        <simpleValue value="40" />
                      </initialValue>
                      <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> variables for MQTT publishing </xhtml>
                      </documentation>
                    </variable>
                    <variable name="publishers">
                      <type>
                        <array>
                          <dimension lower="0" upper="39" />
                          <baseType>
                            <derived name="FB_MqttPublishWorker" />
                          </baseType>
                        </array>
                      </type>
                    </variable>
                    <variable name="i">
                      <type>
                        <UDINT />
                      </type>
                      <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> variables to work with Mqttbuffer </xhtml>
                      </documentation>
                    </variable>
                    <variable name="subscriber_FB_OUTPUT_SWITCH_MQTT">
                      <type>
                        <derived name="SD_MQTT.MQTTSubscribe" />
                      </type>
                      <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> variables for MQTT subscribing </xhtml>
                      </documentation>
                    </variable>
                    <variable name="subscriber_FB_OUTPUT_COVER_MQTT">
                      <type>
                        <derived name="SD_MQTT.MQTTSubscribe" />
                      </type>
                    </variable>
                  </localVars>
                </interface>
                <actions>
                  <action name="MQTT_INIT">
                    <body>
                      <ST>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml">
IF NOT initMqtt THEN
	initMqtt := TRUE;
	(* Basic MQTT config *)
	MQTT_IN_OUT.ClientID := clientID;
	
	(* Set the LWT topic / payload *)
	MQTT_IN_OUT.BuildWillTopicAndMessage := FALSE;
	MQTT_IN_OUT.WillTopicBase := '';
	MQTT_IN_OUT.ClientWillTopic := MQTTLwtTopic;
	MQTT_IN_OUT.ClientWillMessage := MQTTLwtPayload;
	
	(* Set the birth message *)
	MQTTBirthMessage.Payload := MQTTBirthPayload;
	MQTTBirthMessage.Topic := MQTTBirthTopic;
	MQTTBirthMessage.Qos := SD_MQTT.QoS.ExactlyOnce;
	MQTTBirthMessage.MqttRetain := FALSE;
	
	(* Configure the rising edge detector to detect a connect/reconnect to the broker, used for  birth message *)
	MQTTConnectTrigger(CLK := MQTTInfo.MQTT_CONNECTED);
	
	(* Configure the dedicated MQTTBirth publisher *)
	MQTTBirthPublisher.Init(inputMQTT_IN_OUT:= ADR(MQTT_IN_OUT));
	
	(* Configure the pulse generator for the birth message hartbeat *)
	 MQTTBirthHartbeat(ENQ:=TRUE, PTH:=T#0S, PTL:=MQTTBirthHartbeatTime);
	
	(* INIT MQTT PUBLISH STUFF *)
	FOR icounter := 0 TO (ipublishers-1) DO		
		publishers[icounter].Init(inputMQTT_IN_OUT:= ADR(MQTT_IN_OUT));
	END_FOR 
	
	(* INIT MQTT SUBSCRIBE STUFF *)
	subscriber_FB_OUTPUT_SWITCH_MQTT.SetMqttInOut(MQTT_IN_OUT:= ADR(MQTT_IN_OUT));	
	subscriber_FB_OUTPUT_COVER_MQTT.SetMqttInOut(MQTT_IN_OUT:= ADR(MQTT_IN_OUT));

END_IF

</xhtml>
                      </ST>
                    </body>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                        <ObjectId>b0c9e992-b112-47f4-aceb-f216353cefaf</ObjectId>
                      </data>
                    </addData>
                  </action>
                  <action name="MQTT_PUBLISH">
                    <body>
                      <ST>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml">(* allow the rising edge detector to detect a connect/reconnect to the broker, used for  birth message *)
MQTTConnectTrigger(CLK := MQTTInfo.MQTT_CONNECTED);

(* allow the pulse generator to generate a pulse, used for birth message hartbeat *)
MQTTBirthHartbeat(ENQ:=TRUE, PTH:=T#0S, PTL:=MQTTBirthHartbeatTime);

(* Check if this is a new connection due to startup or connection issues *)
IF initMqtt AND (MQTTConnectTrigger.Q OR MQTTBirthHartbeat.Q) THEN
	MQTTPublishBirth := TRUE;
END_IF

(* On connect or reconnect publish a birth message using the dedicated birth publisher *)
IF MQTTPublishBirth THEN
	MQTTBirthPublisher.PublishMessage(MqttMessage := MQTTBirthMessage);
	MQTTPublishBirth:=FALSE;
END_IF


(* Check if Mqtt is initialized AND if there are elements on the queue to process AND if a MQTTbirthmessage has been published successfully *)
IF initMqtt AND NOT(MqttVariables.fbMqttPublishQueue.EMPTY) AND MQTTPublishBirth = FALSE AND MQTTBirthPublisher.SendDone THEN	
	(* Loop through all free publishers untill there are no more elements in the queue or no more free publishers *)
	FOR i:=0 TO (ipublishers-1) DO			
		(* use the publishers that are free  *)
		IF publishers[i].SendDone AND NOT(MqttVariables.fbMqttPublishQueue.EMPTY) THEN	
			(* Pass message from the queue to a publisher *)
			publishers[i].PublishMessage(MqttMessage:= MqttVariables.fbMqttPublishQueue.GetMessage());
		ELSIF MqttVariables.fbMqttPublishQueue.EMPTY THEN
			(* Queue is empty, jump out of the for loop	*)
			EXIT;	
		END_IF
	END_FOR
END_IF


(* If MQTT is initialized, let the MqttPublishWorkers do their work *)
IF initMqtt THEN
	MQTTClient(
		MQTT_IN_OUT:= MQTT_IN_OUT, 
		ENABLE:= TRUE, 
		URL:= broker, 
		TIMEOUT:= T#1S, 
		TLS:= FALSE);		
		
	MQTTBirthPublisher();
	
	FOR i := 0 TO (ipublishers-1) DO
  		publishers[i]();
	END_FOR

END_IF
</xhtml>
                      </ST>
                    </body>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                        <ObjectId>4129da29-9461-4ab2-88d2-8dbec626fefe</ObjectId>
                      </data>
                    </addData>
                  </action>
                  <action name="MQTT_SUBSCRIBE">
                    <body>
                      <ST>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml">(* If MQTT is initialized, let the subscriber(s) do its work *)
IF initMqtt THEN
	MQTTClient(
		MQTT_IN_OUT:= MQTT_IN_OUT, 
		ENABLE:= TRUE, 
		URL:= broker, 
		TIMEOUT:= T#1S, 
		TLS:= FALSE);

	subscriber_FB_OUTPUT_SWITCH_MQTT(
		Subscribe:= TRUE, 
		Topic:= ADR('WAGO-PFC200/In/DigitalOutputs/+'), 
		QoSSubscribe:= SD_MQTT.QoS.ExactlyOnce, 
		ExpectingString:= TRUE, 
		Callback:= MqttVariables.collector_FB_OUTPUT_SWITCH_MQTT,
	);
	
	subscriber_FB_OUTPUT_COVER_MQTT(
		Subscribe:= TRUE, 
		Topic:= ADR('WAGO-PFC200/In/Covers/+'), 
		QoSSubscribe:= SD_MQTT.QoS.ExactlyOnce, 
		ExpectingString:= TRUE, 
		Callback:= MqttVariables.collector_FB_OUTPUT_COVER_MQTT,
	);
END_IF
</xhtml>
                      </ST>
                    </body>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                        <ObjectId>8f495dd5-08ff-4021-8d5e-f2fc6292398c</ObjectId>
                      </data>
                    </addData>
                  </action>
                </actions>
                <body>
                  <SFC>
                    <step localId="0" initialStep="true" name="Init">
                      <position x="0" y="0" />
                      <connectionPointIn />
                      <connectionPointOut formalParameter="sfc" />
                      <connectionPointOutAction formalParameter="x" />
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                          <attributes xmlns="">
                            <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">Init</attribute>
                            <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                            <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                            <attribute guid="6844a48e-46c2-4cc8-a185-a478f3b99cc0">TRUE</attribute>
                            <attribute guid="62e1754b-7629-4e63-9cec-10ae0c536f1f">FALSE</attribute>
                          </attributes>
                        </data>
                      </addData>
                    </step>
                    <actionBlock localId="2">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="0" />
                      </connectionPointIn>
                      <action localId="1" qualifier="N" duration="" indicator="">
                        <relPosition x="0" y="0" />
                        <reference name="MQTT_INIT" />
                        <connectionPointOut />
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                            <attributes xmlns="">
                              <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">MQTT_INIT</attribute>
                              <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                              <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                              <attribute guid="e174fc0d-80b0-4a9e-a530-ca239c249a50">N</attribute>
                            </attributes>
                          </data>
                        </addData>
                      </action>
                    </actionBlock>
                    <inVariable localId="3">
                      <position x="0" y="0" />
                      <connectionPointOut />
                      <expression>True</expression>
                    </inVariable>
                    <transition localId="4">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="0" formalParameter="sfc" />
                      </connectionPointIn>
                      <condition>
                        <connectionPointIn>
                          <connection refLocalId="3" />
                        </connectionPointIn>
                      </condition>
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                          <attributes xmlns="">
                            <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">True</attribute>
                            <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                            <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                            <attribute guid="62e1754b-7629-4e63-9cec-10ae0c536f1f">FALSE</attribute>
                            <attribute guid="8294df19-5962-4dee-a874-1051dabb0e3e">0</attribute>
                          </attributes>
                        </data>
                      </addData>
                    </transition>
                    <step localId="5" name="MQTT">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="4" />
                      </connectionPointIn>
                      <connectionPointOut formalParameter="sfc" />
                      <connectionPointOutAction formalParameter="x" />
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                          <attributes xmlns="">
                            <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">MQTT</attribute>
                            <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                            <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                            <attribute guid="6844a48e-46c2-4cc8-a185-a478f3b99cc0">FALSE</attribute>
                            <attribute guid="62e1754b-7629-4e63-9cec-10ae0c536f1f">FALSE</attribute>
                          </attributes>
                        </data>
                      </addData>
                    </step>
                    <actionBlock localId="8">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="5" />
                      </connectionPointIn>
                      <action localId="6" qualifier="N" duration="" indicator="">
                        <relPosition x="0" y="0" />
                        <reference name="MQTT_PUBLISH" />
                        <connectionPointOut />
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                            <attributes xmlns="">
                              <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">MQTT_PUBLISH</attribute>
                              <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                              <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                              <attribute guid="e174fc0d-80b0-4a9e-a530-ca239c249a50">N</attribute>
                            </attributes>
                          </data>
                        </addData>
                      </action>
                      <action localId="7" qualifier="N" duration="" indicator="">
                        <relPosition x="0" y="0" />
                        <reference name="MQTT_SUBSCRIBE" />
                        <connectionPointOut />
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                            <attributes xmlns="">
                              <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">MQTT_SUBSCRIBE</attribute>
                              <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                              <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                              <attribute guid="e174fc0d-80b0-4a9e-a530-ca239c249a50">N</attribute>
                            </attributes>
                          </data>
                        </addData>
                      </action>
                    </actionBlock>
                    <inVariable localId="9">
                      <position x="0" y="0" />
                      <connectionPointOut />
                      <expression>TRUE</expression>
                    </inVariable>
                    <transition localId="10">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="5" formalParameter="sfc" />
                      </connectionPointIn>
                      <condition>
                        <connectionPointIn>
                          <connection refLocalId="9" />
                        </connectionPointIn>
                      </condition>
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                          <attributes xmlns="">
                            <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">TRUE</attribute>
                            <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                            <attribute guid="bc882c11-1e91-4dd8-a6b8-2075724ed18b">0</attribute>
                            <attribute guid="62e1754b-7629-4e63-9cec-10ae0c536f1f">FALSE</attribute>
                            <attribute guid="8294df19-5962-4dee-a874-1051dabb0e3e">0</attribute>
                          </attributes>
                        </data>
                      </addData>
                    </transition>
                    <jumpStep localId="11" targetName="MQTT">
                      <position x="0" y="0" />
                      <connectionPointIn>
                        <connection refLocalId="10" />
                      </connectionPointIn>
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/sfc/element" handleUnknown="implementation">
                          <attributes xmlns="">
                            <attribute guid="38391c6d-6d4a-42f8-8ee7-9f45e5adafa8">MQTT</attribute>
                            <attribute guid="01580b27-6378-448b-8ecb-0e4b795b58d6">FALSE</attribute>
                          </attributes>
                        </data>
                      </addData>
                    </jumpStep>
                  </SFC>
                </body>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/sfcsettings" handleUnknown="implementation">
                    <SFCSettings>
                      <LibTitle>IecSfc</LibTitle>
                      <LibCompany>System</LibCompany>
                      <LibVersion>3.4.2.0</LibVersion>
                      <LibNamespace>IecSfc</LibNamespace>
                      <CalcActiveTransOnly>false</CalcActiveTransOnly>
                      <UseDefaults>false</UseDefaults>
                      <Flags>
                        <EnableLimit Declare="true" Use="false" />
                        <Init Declare="true" Use="false" />
                        <Reset Declare="true" Use="false" />
                        <QuitError Declare="true" Use="false" />
                        <Pause Declare="true" Use="false" />
                        <Error Declare="true" Use="false" />
                        <Trans Declare="true" Use="false" />
                        <ErrorStep Declare="true" Use="false" />
                        <ErrorPOU Declare="true" Use="false" />
                        <CurrentStep Declare="true" Use="false" />
                        <Tip Declare="true" Use="false" />
                        <TipMode Declare="true" Use="false" />
                        <MaxFlags Declare="true" Use="false" />
                        <SFCErrorAnalyzation Declare="true" Use="false" />
                        <SFCErrorAnalyzationTable Declare="true" Use="false" />
                      </Flags>
                    </SFCSettings>
                  </data>
                  <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                    <ObjectId>012c3962-ea65-4f8b-be5c-432a302d1a76</ObjectId>
                  </data>
                </addData>
              </pou>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/libraries" handleUnknown="implementation">
              <Libraries>
                <Library Name="#Standard" Namespace="Standard" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" DefaultResolution="Standard, * (System)" />
                <Library Name="#IoDrvPfc200" Namespace="IoDrvPfc200Lib" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="IoDrvPfc200, 3.5.13.0 (3S - Smart Software Solutions GmbH)" />
                <Library Name="#IecSfc" Namespace="IecSfc" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="IecSfc, 3.4.2.0 (System)" />
                <Library Name="#Analyzation" Namespace="Analyzation" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="Analyzation, 3.5.2.0 (System)">
                  <Parameters>
                    <Parameter Name="TABLE_UPPER_BOUND" Value="15" />
                    <Parameter Name="STRING_LENGTH_EXP" Value="255" />
                    <Parameter Name="STRING_LENGTH_ADDRESS" Value="20" />
                    <Parameter Name="STRING_LENGTH_COMMENT" Value="255" />
                    <Parameter Name="STRING_LENGTH_OUTSTRING" Value="255" />
                    <Parameter Name="TABLE_SHOW_VALID_ITEMS" Value="FALSE" />
                  </Parameters>
                </Library>
                <Library Name="BASIC, 3.3.3.0 (OSCAT)" Namespace="OSCAT_BASIC" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
                <Library Name="BUILDING, 1.0.0.0 (OSCAT)" Namespace="OSCAT_BUILDING" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
                <Library Name="OSCAT NETWORK, 1.30 (OSCAT)" Namespace="OSCAT_NETWORK" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
                <Library Name="#BreakpointLogging" Namespace="BPLog" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="Breakpoint Logging Functions, 3.5.5.0 (3S - Smart Software Solutions GmbH)" />
                <Library Name="#CDS_MemMan" Namespace="CMM" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="CDS_MemMan, 3.3.2.0 (3S - Smart Software Solutions GmbH)" />
                <Library Name="Element Collections, 3.5.14.0 (3S - Smart Software Solutions GmbH)" Namespace="COL" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
                <Library Name="MQTT, 1.1.0.0 (Stefan Dreyer)" Namespace="SD_MQTT" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
                <Library Name="#CommonTypsFunctions" Namespace="CommonTypesAndFunctions" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" DefaultResolution="Common Helper for development, * (Stefan Dreyer)" />
                <Library Name="#IoStandard" Namespace="IoStandard" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="true" DefaultResolution="IoStandard, 3.5.15.0 (System)" />
                <Library Name="#3SLicense" Namespace="_3S_LICENSE" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="3SLicense, 0.0.0.0 (3S - Smart Software Solutions GmbH)" ResolverGuid="97c3b452-d9fa-4ac2-9d0c-3d420aa6d95b" />
                <Library Name="#CAA Device Diagnosis" Namespace="DED" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="CAA Device Diagnosis, 3.5.15.0 (CAA Technical Workgroup)" />
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                    <ObjectId>1f1166ba-ce55-40de-a774-1179e27627c8</ObjectId>
                  </data>
                </addData>
              </Libraries>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
              <ObjectId>dc8b4b06-db0a-415d-9c9a-bbaa6953bc53</ObjectId>
            </data>
          </addData>
        </resource>
        <addData>
          <data name="Device" handleUnknown="discard">
            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
              <DeviceType>
                <DeviceIdentification>
                  <Type>4096</Type>
                  <Id>0000 0013</Id>
                  <Version>3.5.15.10</Version>
                </DeviceIdentification>
                <Connector moduleType="256" interface="Common.PCI" connectorId="0">
                  <HostParameterSet />
                </Connector>
                <Connector moduleType="256" interface="PFC200" connectorId="1">
                  <HostParameterSet />
                </Connector>
                <DeviceParameterSet />
              </DeviceType>
            </Device>
          </data>
          <data name="configurations" handleUnknown="discard">
            <configurations>
              <configuration name="Pfc200Bus">
                <addData>
                  <data name="Device" handleUnknown="discard">
                    <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                      <DeviceType>
                        <DeviceIdentification>
                          <Type>288</Type>
                          <Id>0000 0001</Id>
                          <Version>3.5.15.20</Version>
                        </DeviceIdentification>
                        <Connector moduleType="257" role="child" interface="PFC200" connectorId="0">
                          <HostParameterSet />
                        </Connector>
                        <Connector moduleType="288" interface="PFC200.Bus" connectorId="1">
                          <HostParameterSet />
                        </Connector>
                        <DeviceParameterSet />
                      </DeviceType>
                    </Device>
                  </data>
                  <data name="configurations" handleUnknown="discard">
                    <configurations>
                      <configuration name="_750_1516_0">
                        <addData>
                          <data name="Device" handleUnknown="discard">
                            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                              <DeviceType>
                                <ModuleIdentification>
                                  <Type>288</Type>
                                  <Id>0000 0001</Id>
                                  <Version>3.5.15.20</Version>
                                  <ModuleId>8802_750_1516</ModuleId>
                                </ModuleIdentification>
                                <Connector moduleType="289" role="child" interface="PFC200.Bus" connectorId="0">
                                  <HostParameterSet>
                                    <Parameter ParameterId="100" type="std:WORD" IndexInDevDesc="0">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_00" visiblename="Modulecode" offlineaccess="none" onlineaccess="none">16#8802</Value>
                                      <Name>Modulecode</Name>
                                    </Parameter>
                                    <Parameter ParameterId="20000" type="localTypes:Bit8Output" IndexInDevDesc="2">
                                      <Attributes channel="output" />
                                      <Value name="_x0032_0000" visiblename="Digital Outputs 0 - 7">
                                        <Element name="BIT0" visiblename="DO0" />
                                        <Element name="BIT1" visiblename="DO1" />
                                        <Element name="BIT2" visiblename="DO2" />
                                        <Element name="BIT3" visiblename="DO3" />
                                        <Element name="BIT4" visiblename="DO4" />
                                        <Element name="BIT5" visiblename="DO5" />
                                        <Element name="BIT6" visiblename="DO6" />
                                        <Element name="BIT7" visiblename="DO7" />
                                      </Value>
                                      <Name>Digital Outputs 0 - 7</Name>
                                      <Mapping>
                                        <Element name="BIT0">DO_001</Element>
                                        <Element name="BIT1">DO_002</Element>
                                        <Element name="BIT2">DO_003</Element>
                                        <Element name="BIT3">DO_004</Element>
                                        <Element name="BIT4">DO_005</Element>
                                        <Element name="BIT5">DO_006</Element>
                                        <Element name="BIT6">DO_007</Element>
                                        <Element name="BIT7">DO_008</Element>
                                      </Mapping>
                                    </Parameter>
                                    <Parameter ParameterId="21000" type="std:WORD" IndexInDevDesc="1">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0032_1000" visiblename="Digital Outputs 0 - 7" offlineaccess="none" onlineaccess="none">8</Value>
                                      <Name>Digital Outputs 0 - 7</Name>
                                    </Parameter>
                                  </HostParameterSet>
                                </Connector>
                                <DeviceParameterSet />
                              </DeviceType>
                            </Device>
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                            <ObjectId>b37b05d4-4bdd-43e1-9187-3aa874381821</ObjectId>
                          </data>
                        </addData>
                      </configuration>
                      <configuration name="_750_1516_1">
                        <addData>
                          <data name="Device" handleUnknown="discard">
                            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                              <DeviceType>
                                <ModuleIdentification>
                                  <Type>288</Type>
                                  <Id>0000 0001</Id>
                                  <Version>3.5.15.20</Version>
                                  <ModuleId>8802_750_1516</ModuleId>
                                </ModuleIdentification>
                                <Connector moduleType="289" role="child" interface="PFC200.Bus" connectorId="0">
                                  <HostParameterSet>
                                    <Parameter ParameterId="100" type="std:WORD" IndexInDevDesc="0">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_00" visiblename="Modulecode" offlineaccess="none" onlineaccess="none">16#8802</Value>
                                      <Name>Modulecode</Name>
                                    </Parameter>
                                    <Parameter ParameterId="20000" type="localTypes:Bit8Output" IndexInDevDesc="2">
                                      <Attributes channel="output" />
                                      <Value name="_x0032_0000" visiblename="Digital Outputs 0 - 7">
                                        <Element name="BIT0" visiblename="DO0" />
                                        <Element name="BIT1" visiblename="DO1" />
                                        <Element name="BIT2" visiblename="DO2" />
                                        <Element name="BIT3" visiblename="DO3" />
                                        <Element name="BIT4" visiblename="DO4" />
                                        <Element name="BIT5" visiblename="DO5" />
                                        <Element name="BIT6" visiblename="DO6" />
                                        <Element name="BIT7" visiblename="DO7" />
                                      </Value>
                                      <Name>Digital Outputs 0 - 7</Name>
                                      <Mapping>
                                        <Element name="BIT0">DO_009</Element>
                                        <Element name="BIT1">DO_010</Element>
                                        <Element name="BIT2">DO_011</Element>
                                        <Element name="BIT3">DO_012</Element>
                                        <Element name="BIT4">DO_013</Element>
                                        <Element name="BIT5">DO_014</Element>
                                        <Element name="BIT6">DO_015</Element>
                                        <Element name="BIT7">DO_016</Element>
                                      </Mapping>
                                    </Parameter>
                                    <Parameter ParameterId="21000" type="std:WORD" IndexInDevDesc="1">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0032_1000" visiblename="Digital Outputs 0 - 7" offlineaccess="none" onlineaccess="none">8</Value>
                                      <Name>Digital Outputs 0 - 7</Name>
                                    </Parameter>
                                  </HostParameterSet>
                                </Connector>
                                <DeviceParameterSet />
                              </DeviceType>
                            </Device>
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                            <ObjectId>32e4015b-ba0f-49df-a42f-f3d5214f9051</ObjectId>
                          </data>
                        </addData>
                      </configuration>
                      <configuration name="_750_1516_2">
                        <addData>
                          <data name="Device" handleUnknown="discard">
                            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                              <DeviceType>
                                <ModuleIdentification>
                                  <Type>288</Type>
                                  <Id>0000 0001</Id>
                                  <Version>3.5.15.20</Version>
                                  <ModuleId>8802_750_1516</ModuleId>
                                </ModuleIdentification>
                                <Connector moduleType="289" role="child" interface="PFC200.Bus" connectorId="0">
                                  <HostParameterSet>
                                    <Parameter ParameterId="100" type="std:WORD" IndexInDevDesc="0">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_00" visiblename="Modulecode" offlineaccess="none" onlineaccess="none">16#8802</Value>
                                      <Name>Modulecode</Name>
                                    </Parameter>
                                    <Parameter ParameterId="20000" type="localTypes:Bit8Output" IndexInDevDesc="2">
                                      <Attributes channel="output" />
                                      <Value name="_x0032_0000" visiblename="Digital Outputs 0 - 7">
                                        <Element name="BIT0" visiblename="DO0" />
                                        <Element name="BIT1" visiblename="DO1" />
                                        <Element name="BIT2" visiblename="DO2" />
                                        <Element name="BIT3" visiblename="DO3" />
                                        <Element name="BIT4" visiblename="DO4" />
                                        <Element name="BIT5" visiblename="DO5" />
                                        <Element name="BIT6" visiblename="DO6" />
                                        <Element name="BIT7" visiblename="DO7" />
                                      </Value>
                                      <Name>Digital Outputs 0 - 7</Name>
                                      <Mapping>
                                        <Element name="BIT0">DO_017</Element>
                                        <Element name="BIT1">DO_018</Element>
                                        <Element name="BIT2">DO_019</Element>
                                        <Element name="BIT3">DO_020</Element>
                                        <Element name="BIT4">DO_021</Element>
                                        <Element name="BIT5">DO_022</Element>
                                        <Element name="BIT6">DO_023</Element>
                                        <Element name="BIT7">DO_024</Element>
                                      </Mapping>
                                    </Parameter>
                                    <Parameter ParameterId="21000" type="std:WORD" IndexInDevDesc="1">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0032_1000" visiblename="Digital Outputs 0 - 7" offlineaccess="none" onlineaccess="none">8</Value>
                                      <Name>Digital Outputs 0 - 7</Name>
                                    </Parameter>
                                  </HostParameterSet>
                                </Connector>
                                <DeviceParameterSet />
                              </DeviceType>
                            </Device>
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                            <ObjectId>adacc0c0-461f-416b-b652-1381c8b1ebd6</ObjectId>
                          </data>
                        </addData>
                      </configuration>
                      <configuration name="_750_1516_3">
                        <addData>
                          <data name="Device" handleUnknown="discard">
                            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                              <DeviceType>
                                <ModuleIdentification>
                                  <Type>288</Type>
                                  <Id>0000 0001</Id>
                                  <Version>3.5.15.20</Version>
                                  <ModuleId>8802_750_1516</ModuleId>
                                </ModuleIdentification>
                                <Connector moduleType="289" role="child" interface="PFC200.Bus" connectorId="0">
                                  <HostParameterSet>
                                    <Parameter ParameterId="100" type="std:WORD" IndexInDevDesc="0">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_00" visiblename="Modulecode" offlineaccess="none" onlineaccess="none">16#8802</Value>
                                      <Name>Modulecode</Name>
                                    </Parameter>
                                    <Parameter ParameterId="20000" type="localTypes:Bit8Output" IndexInDevDesc="2">
                                      <Attributes channel="output" />
                                      <Value name="_x0032_0000" visiblename="Digital Outputs 0 - 7">
                                        <Element name="BIT0" visiblename="DO0" />
                                        <Element name="BIT1" visiblename="DO1" />
                                        <Element name="BIT2" visiblename="DO2" />
                                        <Element name="BIT3" visiblename="DO3" />
                                        <Element name="BIT4" visiblename="DO4" />
                                        <Element name="BIT5" visiblename="DO5" />
                                        <Element name="BIT6" visiblename="DO6" />
                                        <Element name="BIT7" visiblename="DO7" />
                                      </Value>
                                      <Name>Digital Outputs 0 - 7</Name>
                                      <Mapping>
                                        <Element name="BIT0">DO_025</Element>
                                        <Element name="BIT1">DO_026</Element>
                                        <Element name="BIT2">DO_027</Element>
                                        <Element name="BIT3">DO_028</Element>
                                        <Element name="BIT4">DO_029</Element>
                                        <Element name="BIT5">DO_030</Element>
                                        <Element name="BIT6">DO_031</Element>
                                        <Element name="BIT7">DO_032</Element>
                                      </Mapping>
                                    </Parameter>
                                    <Parameter ParameterId="21000" type="std:WORD" IndexInDevDesc="1">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0032_1000" visiblename="Digital Outputs 0 - 7" offlineaccess="none" onlineaccess="none">8</Value>
                                      <Name>Digital Outputs 0 - 7</Name>
                                    </Parameter>
                                  </HostParameterSet>
                                </Connector>
                                <DeviceParameterSet />
                              </DeviceType>
                            </Device>
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                            <ObjectId>9b0c19a6-a6f0-447f-b02e-2613e9d6d822</ObjectId>
                          </data>
                        </addData>
                      </configuration>
                      <configuration name="_750_1418_0">
                        <addData>
                          <data name="Device" handleUnknown="discard">
                            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                              <DeviceType>
                                <ModuleIdentification>
                                  <Type>288</Type>
                                  <Id>0000 0001</Id>
                                  <Version>3.5.15.20</Version>
                                  <ModuleId>8801_750_1418</ModuleId>
                                </ModuleIdentification>
                                <Connector moduleType="289" role="child" interface="PFC200.Bus" connectorId="0">
                                  <HostParameterSet>
                                    <Parameter ParameterId="100" type="std:WORD" IndexInDevDesc="0">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_00" visiblename="Modulecode" offlineaccess="none" onlineaccess="none">16#8801</Value>
                                      <Name>Modulecode</Name>
                                    </Parameter>
                                    <Parameter ParameterId="10000" type="localTypes:Bit8Input" IndexInDevDesc="2">
                                      <Attributes channel="input" />
                                      <Value name="_x0031_0000" visiblename="Digital Inputs 0 - 7">
                                        <Element name="BIT0" visiblename="DI0" />
                                        <Element name="BIT1" visiblename="DI1" />
                                        <Element name="BIT2" visiblename="DI2" />
                                        <Element name="BIT3" visiblename="DI3" />
                                        <Element name="BIT4" visiblename="DI4" />
                                        <Element name="BIT5" visiblename="DI5" />
                                        <Element name="BIT6" visiblename="DI6" />
                                        <Element name="BIT7" visiblename="DI7" />
                                      </Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                      <Mapping>
                                        <Element name="BIT0">DI_001</Element>
                                        <Element name="BIT1">DI_002</Element>
                                        <Element name="BIT2">DI_003</Element>
                                        <Element name="BIT3">DI_004</Element>
                                        <Element name="BIT4">DI_005</Element>
                                        <Element name="BIT5">DI_006</Element>
                                        <Element name="BIT6">DI_007</Element>
                                        <Element name="BIT7">DI_008</Element>
                                      </Mapping>
                                    </Parameter>
                                    <Parameter ParameterId="11000" type="std:WORD" IndexInDevDesc="1">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_1000" visiblename="Digital Inputs 0 - 7" offlineaccess="none" onlineaccess="none">8</Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                    </Parameter>
                                  </HostParameterSet>
                                </Connector>
                                <DeviceParameterSet />
                              </DeviceType>
                            </Device>
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                            <ObjectId>eaa60c77-19fe-4c67-9644-d7ddf406cfce</ObjectId>
                          </data>
                        </addData>
                      </configuration>
                      <configuration name="_750_1418_1">
                        <addData>
                          <data name="Device" handleUnknown="discard">
                            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                              <DeviceType>
                                <ModuleIdentification>
                                  <Type>288</Type>
                                  <Id>0000 0001</Id>
                                  <Version>3.5.15.20</Version>
                                  <ModuleId>8801_750_1418</ModuleId>
                                </ModuleIdentification>
                                <Connector moduleType="289" role="child" interface="PFC200.Bus" connectorId="0">
                                  <HostParameterSet>
                                    <Parameter ParameterId="100" type="std:WORD" IndexInDevDesc="0">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_00" visiblename="Modulecode" offlineaccess="none" onlineaccess="none">16#8801</Value>
                                      <Name>Modulecode</Name>
                                    </Parameter>
                                    <Parameter ParameterId="10000" type="localTypes:Bit8Input" IndexInDevDesc="2">
                                      <Attributes channel="input" />
                                      <Value name="_x0031_0000" visiblename="Digital Inputs 0 - 7">
                                        <Element name="BIT0" visiblename="DI0" />
                                        <Element name="BIT1" visiblename="DI1" />
                                        <Element name="BIT2" visiblename="DI2" />
                                        <Element name="BIT3" visiblename="DI3" />
                                        <Element name="BIT4" visiblename="DI4" />
                                        <Element name="BIT5" visiblename="DI5" />
                                        <Element name="BIT6" visiblename="DI6" />
                                        <Element name="BIT7" visiblename="DI7" />
                                      </Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                      <Mapping>
                                        <Element name="BIT0">DI_009</Element>
                                        <Element name="BIT1">DI_010</Element>
                                        <Element name="BIT2">DI_011</Element>
                                        <Element name="BIT3">DI_012</Element>
                                        <Element name="BIT4">DI_013</Element>
                                        <Element name="BIT5">DI_014</Element>
                                        <Element name="BIT6">DI_015</Element>
                                        <Element name="BIT7">DI_016</Element>
                                      </Mapping>
                                    </Parameter>
                                    <Parameter ParameterId="11000" type="std:WORD" IndexInDevDesc="1">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_1000" visiblename="Digital Inputs 0 - 7" offlineaccess="none" onlineaccess="none">8</Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                    </Parameter>
                                  </HostParameterSet>
                                </Connector>
                                <DeviceParameterSet />
                              </DeviceType>
                            </Device>
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                            <ObjectId>1a6d8c5a-4e14-4049-b064-8e4486b88ec8</ObjectId>
                          </data>
                        </addData>
                      </configuration>
                      <configuration name="_750_1418_2">
                        <addData>
                          <data name="Device" handleUnknown="discard">
                            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                              <DeviceType>
                                <ModuleIdentification>
                                  <Type>288</Type>
                                  <Id>0000 0001</Id>
                                  <Version>3.5.15.20</Version>
                                  <ModuleId>8801_750_1418</ModuleId>
                                </ModuleIdentification>
                                <Connector moduleType="289" role="child" interface="PFC200.Bus" connectorId="0">
                                  <HostParameterSet>
                                    <Parameter ParameterId="100" type="std:WORD" IndexInDevDesc="0">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_00" visiblename="Modulecode" offlineaccess="none" onlineaccess="none">16#8801</Value>
                                      <Name>Modulecode</Name>
                                    </Parameter>
                                    <Parameter ParameterId="10000" type="localTypes:Bit8Input" IndexInDevDesc="2">
                                      <Attributes channel="input" />
                                      <Value name="_x0031_0000" visiblename="Digital Inputs 0 - 7">
                                        <Element name="BIT0" visiblename="DI0" />
                                        <Element name="BIT1" visiblename="DI1" />
                                        <Element name="BIT2" visiblename="DI2" />
                                        <Element name="BIT3" visiblename="DI3" />
                                        <Element name="BIT4" visiblename="DI4" />
                                        <Element name="BIT5" visiblename="DI5" />
                                        <Element name="BIT6" visiblename="DI6" />
                                        <Element name="BIT7" visiblename="DI7" />
                                      </Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                      <Mapping>
                                        <Element name="BIT0">DI_017</Element>
                                        <Element name="BIT1">DI_018</Element>
                                        <Element name="BIT2">DI_019</Element>
                                        <Element name="BIT3">DI_020</Element>
                                        <Element name="BIT4">DI_021</Element>
                                        <Element name="BIT5">DI_022</Element>
                                        <Element name="BIT6">DI_023</Element>
                                        <Element name="BIT7">DI_024</Element>
                                      </Mapping>
                                    </Parameter>
                                    <Parameter ParameterId="11000" type="std:WORD" IndexInDevDesc="1">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_1000" visiblename="Digital Inputs 0 - 7" offlineaccess="none" onlineaccess="none">8</Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                    </Parameter>
                                  </HostParameterSet>
                                </Connector>
                                <DeviceParameterSet />
                              </DeviceType>
                            </Device>
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                            <ObjectId>63118162-4753-40cd-852d-739749992f96</ObjectId>
                          </data>
                        </addData>
                      </configuration>
                      <configuration name="_750_1418_3">
                        <addData>
                          <data name="Device" handleUnknown="discard">
                            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                              <DeviceType>
                                <ModuleIdentification>
                                  <Type>288</Type>
                                  <Id>0000 0001</Id>
                                  <Version>3.5.15.20</Version>
                                  <ModuleId>8801_750_1418</ModuleId>
                                </ModuleIdentification>
                                <Connector moduleType="289" role="child" interface="PFC200.Bus" connectorId="0">
                                  <HostParameterSet>
                                    <Parameter ParameterId="100" type="std:WORD" IndexInDevDesc="0">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_00" visiblename="Modulecode" offlineaccess="none" onlineaccess="none">16#8801</Value>
                                      <Name>Modulecode</Name>
                                    </Parameter>
                                    <Parameter ParameterId="10000" type="localTypes:Bit8Input" IndexInDevDesc="2">
                                      <Attributes channel="input" />
                                      <Value name="_x0031_0000" visiblename="Digital Inputs 0 - 7">
                                        <Element name="BIT0" visiblename="DI0" />
                                        <Element name="BIT1" visiblename="DI1" />
                                        <Element name="BIT2" visiblename="DI2" />
                                        <Element name="BIT3" visiblename="DI3" />
                                        <Element name="BIT4" visiblename="DI4" />
                                        <Element name="BIT5" visiblename="DI5" />
                                        <Element name="BIT6" visiblename="DI6" />
                                        <Element name="BIT7" visiblename="DI7" />
                                      </Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                      <Mapping>
                                        <Element name="BIT0">DI_025</Element>
                                        <Element name="BIT1">DI_026</Element>
                                        <Element name="BIT2">DI_027</Element>
                                        <Element name="BIT3">DI_028</Element>
                                        <Element name="BIT4">DI_029</Element>
                                        <Element name="BIT5">DI_030</Element>
                                        <Element name="BIT6">DI_031</Element>
                                        <Element name="BIT7">DI_032</Element>
                                      </Mapping>
                                    </Parameter>
                                    <Parameter ParameterId="11000" type="std:WORD" IndexInDevDesc="1">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_1000" visiblename="Digital Inputs 0 - 7" offlineaccess="none" onlineaccess="none">8</Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                    </Parameter>
                                  </HostParameterSet>
                                </Connector>
                                <DeviceParameterSet />
                              </DeviceType>
                            </Device>
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                            <ObjectId>ae70f7b8-d590-4c8b-929b-851ffe5f2af5</ObjectId>
                          </data>
                        </addData>
                      </configuration>
                      <configuration name="_750_1418_4">
                        <addData>
                          <data name="Device" handleUnknown="discard">
                            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                              <DeviceType>
                                <ModuleIdentification>
                                  <Type>288</Type>
                                  <Id>0000 0001</Id>
                                  <Version>3.5.15.20</Version>
                                  <ModuleId>8801_750_1418</ModuleId>
                                </ModuleIdentification>
                                <Connector moduleType="289" role="child" interface="PFC200.Bus" connectorId="0">
                                  <HostParameterSet>
                                    <Parameter ParameterId="100" type="std:WORD" IndexInDevDesc="0">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_00" visiblename="Modulecode" offlineaccess="none" onlineaccess="none">16#8801</Value>
                                      <Name>Modulecode</Name>
                                    </Parameter>
                                    <Parameter ParameterId="10000" type="localTypes:Bit8Input" IndexInDevDesc="2">
                                      <Attributes channel="input" />
                                      <Value name="_x0031_0000" visiblename="Digital Inputs 0 - 7">
                                        <Element name="BIT0" visiblename="DI0" />
                                        <Element name="BIT1" visiblename="DI1" />
                                        <Element name="BIT2" visiblename="DI2" />
                                        <Element name="BIT3" visiblename="DI3" />
                                        <Element name="BIT4" visiblename="DI4" />
                                        <Element name="BIT5" visiblename="DI5" />
                                        <Element name="BIT6" visiblename="DI6" />
                                        <Element name="BIT7" visiblename="DI7" />
                                      </Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                      <Mapping>
                                        <Element name="BIT0">DI_033</Element>
                                        <Element name="BIT1">DI_034</Element>
                                        <Element name="BIT2">DI_035</Element>
                                        <Element name="BIT3">DI_036</Element>
                                        <Element name="BIT4">DI_037</Element>
                                        <Element name="BIT5">DI_038</Element>
                                        <Element name="BIT6">DI_039</Element>
                                        <Element name="BIT7">DI_040</Element>
                                      </Mapping>
                                    </Parameter>
                                    <Parameter ParameterId="11000" type="std:WORD" IndexInDevDesc="1">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_1000" visiblename="Digital Inputs 0 - 7" offlineaccess="none" onlineaccess="none">8</Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                    </Parameter>
                                  </HostParameterSet>
                                </Connector>
                                <DeviceParameterSet />
                              </DeviceType>
                            </Device>
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                            <ObjectId>68666952-1d12-4f8b-8760-11fe21dc013d</ObjectId>
                          </data>
                        </addData>
                      </configuration>
                      <configuration name="_750_1418_5">
                        <addData>
                          <data name="Device" handleUnknown="discard">
                            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
                              <DeviceType>
                                <ModuleIdentification>
                                  <Type>288</Type>
                                  <Id>0000 0001</Id>
                                  <Version>3.5.15.20</Version>
                                  <ModuleId>8801_750_1418</ModuleId>
                                </ModuleIdentification>
                                <Connector moduleType="289" role="child" interface="PFC200.Bus" connectorId="0">
                                  <HostParameterSet>
                                    <Parameter ParameterId="100" type="std:WORD" IndexInDevDesc="0">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_00" visiblename="Modulecode" offlineaccess="none" onlineaccess="none">16#8801</Value>
                                      <Name>Modulecode</Name>
                                    </Parameter>
                                    <Parameter ParameterId="10000" type="localTypes:Bit8Input" IndexInDevDesc="2">
                                      <Attributes channel="input" />
                                      <Value name="_x0031_0000" visiblename="Digital Inputs 0 - 7">
                                        <Element name="BIT0" visiblename="DI0" />
                                        <Element name="BIT1" visiblename="DI1" />
                                        <Element name="BIT2" visiblename="DI2" />
                                        <Element name="BIT3" visiblename="DI3" />
                                        <Element name="BIT4" visiblename="DI4" />
                                        <Element name="BIT5" visiblename="DI5" />
                                        <Element name="BIT6" visiblename="DI6" />
                                        <Element name="BIT7" visiblename="DI7" />
                                      </Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                      <Mapping>
                                        <Element name="BIT0">DI_041</Element>
                                        <Element name="BIT1">DI_042</Element>
                                        <Element name="BIT2">DI_043</Element>
                                        <Element name="BIT3">DI_044</Element>
                                        <Element name="BIT4">DI_045</Element>
                                        <Element name="BIT5">DI_046</Element>
                                        <Element name="BIT6">DI_047</Element>
                                        <Element name="BIT7">DI_048</Element>
                                      </Mapping>
                                    </Parameter>
                                    <Parameter ParameterId="11000" type="std:WORD" IndexInDevDesc="1">
                                      <Attributes offlineaccess="none" onlineaccess="none" />
                                      <Value name="_x0031_1000" visiblename="Digital Inputs 0 - 7" offlineaccess="none" onlineaccess="none">8</Value>
                                      <Name>Digital Inputs 0 - 7</Name>
                                    </Parameter>
                                  </HostParameterSet>
                                </Connector>
                                <DeviceParameterSet />
                              </DeviceType>
                            </Device>
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                            <ObjectId>c8b7b93e-3c72-4d39-941e-3f42f39a539f</ObjectId>
                          </data>
                        </addData>
                      </configuration>
                    </configurations>
                  </data>
                  <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                    <ObjectId>3e1580f4-0cef-4a03-b965-3ad674854a91</ObjectId>
                  </data>
                </addData>
              </configuration>
            </configurations>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>db89351c-5d80-40f3-a571-a0980e89ed18</ObjectId>
          </data>
        </addData>
      </configuration>
    </configurations>
  </instances>
  <addData>
    <data name="http://www.3s-software.com/plcopenxml/projectstructure" handleUnknown="discard">
      <ProjectStructure>
        <Folder Name="BaseLib">
          <Object Name="_RMP_B" ObjectId="3f48a6c7-636f-43ab-9386-15f2f982ba50">
            <Object Name="SetRMP" ObjectId="b3508619-19b6-4ffb-80df-5223258b7afb" />
          </Object>
          <Object Name="RMP_B" ObjectId="ce7b29ca-5258-468f-8e59-690b72730bc9">
            <Object Name="SetRMP" ObjectId="ef579e3a-a9bc-4ad0-a0ec-25cd1f479976" />
          </Object>
          <Object Name="BLIND_ACTUATOR" ObjectId="0b1d373a-2c7c-4799-af0f-162ae6b577e0">
            <Object Name="SetPOS" ObjectId="167b6021-0c88-4bdd-921c-8c5ecedef703" />
          </Object>
          <Object Name="COVER_STATES" ObjectId="9c2a59ba-71cb-4d93-96a9-ad73a3290bb0" />
          <Object Name="CALC_COVER_STATE" ObjectId="61b59663-b370-4a5a-9f46-4c3339a09478" />
        </Folder>
        <Object Name="Device" ObjectId="db89351c-5d80-40f3-a571-a0980e89ed18">
          <Object Name="HomeAutomation" ObjectId="dc8b4b06-db0a-415d-9c9a-bbaa6953bc53">
            <Object Name="Library Manager" ObjectId="1f1166ba-ce55-40de-a774-1179e27627c8" />
            <Folder Name="PRG's">
              <Object Name="PLC_PRG_MAIN" ObjectId="98c8b3af-823f-460e-96b4-4a3a11616ef1">
                <Object Name="WRITE_SWITCHES" ObjectId="bc43bd28-4a8e-408d-8fdd-b4f45ff42b62" />
                <Object Name="READ_PUSHBUTTONS" ObjectId="72c511d1-ce6f-4b43-a80f-bcc4f298eb89" />
                <Object Name="MAIN_INIT" ObjectId="f5b06497-3f42-4150-9639-33f5f16d160a" />
                <Object Name="MOVE_COVERS" ObjectId="0179406e-0243-4248-bd15-86bda23b0ead" />
              </Object>
              <Object Name="PLC_PRG_MQTT" ObjectId="012c3962-ea65-4f8b-be5c-432a302d1a76">
                <Object Name="MQTT_INIT" ObjectId="b0c9e992-b112-47f4-aceb-f216353cefaf" />
                <Object Name="MQTT_PUBLISH" ObjectId="4129da29-9461-4ab2-88d2-8dbec626fefe" />
                <Object Name="MQTT_SUBSCRIBE" ObjectId="8f495dd5-08ff-4021-8d5e-f2fc6292398c" />
              </Object>
            </Folder>
            <Object Name="MainTask" ObjectId="3105d1e0-925d-4f28-aadf-e5d4d663e807" />
            <Object Name="MqttCommunication" ObjectId="697fd9f7-7f03-439d-a4ee-169b615acbda" />
            <Object Name="MqttVariables" ObjectId="4f9cb91a-49cd-4924-912b-f57a11772a7e" />
            <Object Name="PersistentVars" ObjectId="75fbe56d-b36e-4d1d-a520-902891aa15d6" />
          </Object>
          <Object Name="Pfc200Bus" ObjectId="3e1580f4-0cef-4a03-b965-3ad674854a91">
            <Object Name="_750_1516_0" ObjectId="b37b05d4-4bdd-43e1-9187-3aa874381821" />
            <Object Name="_750_1516_1" ObjectId="32e4015b-ba0f-49df-a42f-f3d5214f9051" />
            <Object Name="_750_1516_2" ObjectId="adacc0c0-461f-416b-b652-1381c8b1ebd6" />
            <Object Name="_750_1516_3" ObjectId="9b0c19a6-a6f0-447f-b02e-2613e9d6d822" />
            <Object Name="_750_1418_0" ObjectId="eaa60c77-19fe-4c67-9644-d7ddf406cfce" />
            <Object Name="_750_1418_1" ObjectId="1a6d8c5a-4e14-4049-b064-8e4486b88ec8" />
            <Object Name="_750_1418_2" ObjectId="63118162-4753-40cd-852d-739749992f96" />
            <Object Name="_750_1418_3" ObjectId="ae70f7b8-d590-4c8b-929b-851ffe5f2af5" />
            <Object Name="_750_1418_4" ObjectId="68666952-1d12-4f8b-8760-11fe21dc013d" />
            <Object Name="_750_1418_5" ObjectId="c8b7b93e-3c72-4d39-941e-3f42f39a539f" />
          </Object>
        </Object>
        <Object Name="FB_INPUT_BINARYSENSOR_MQTT" ObjectId="2ae241ed-19d1-414f-86e0-147042ebb46c">
          <Object Name="InitMqtt" ObjectId="946ec5b7-7059-481f-8608-807a404f7606" />
        </Object>
        <Object Name="FB_INPUT_PUSHBUTTON_DIMMER_MQTT" ObjectId="06a3de0b-4cb9-4d5f-ade8-06ae23ed6c38">
          <Object Name="InitMqtt" ObjectId="0c660b5e-4b28-4f99-a799-5108206ccfc1" />
          <Object Name="ConfigureFunctionBlock" ObjectId="8923a8ec-096a-40a5-abdf-f4631fa1af23" />
        </Object>
        <Object Name="FB_INPUT_PUSHBUTTON_MQTT" ObjectId="62f7f12e-476b-405b-a551-5cd4cad54a8c">
          <Object Name="InitMqtt" ObjectId="00a19611-db73-47b3-b42c-0ee4b39cb6ec" />
          <Object Name="ConfigureFunctionBlock" ObjectId="3c1dd1f8-c260-4341-9424-157bd8992425" />
        </Object>
        <Object Name="FB_OUTPUT_COVER_MQTT" ObjectId="4e689137-5de5-465f-8bfe-2a0e858be318">
          <Object Name="InitMqtt" ObjectId="69ba519d-4ac4-4926-b590-ec1f25833098" />
          <Object Name="PublishReceived" ObjectId="58832cec-c5c1-4a80-93d6-f1f3f87f820d" />
          <Object Name="ConfigureFunctionBlock" ObjectId="f6efc662-2624-473c-8772-d4c15aca0749" />
        </Object>
        <Object Name="FB_OUTPUT_SWITCH_MQTT" ObjectId="3f52d08f-9a82-49ed-a942-f43debc60cb3">
          <Object Name="InitMqtt" ObjectId="47d3e400-9d5e-4ef2-8076-8a554afda954" />
          <Object Name="PublishReceived" ObjectId="20ce667b-61fa-410b-9c54-745ea0d5e8ae" />
        </Object>
        <Folder Name="MQTT">
          <Object Name="FB_MqttPublishQueue" ObjectId="90e71aee-edab-434c-affe-fdf28a1fee58">
            <Object Name="GetMessage" ObjectId="529fd411-4cec-4e8b-a6d3-21697c77c815" />
            <Object Name="AddMessage" ObjectId="a0b946f4-b684-4e79-adac-e0bf13ee9531" />
            <Object Name="Reset" ObjectId="175faf63-9a69-4df0-99e5-748386e48903" />
          </Object>
          <Object Name="FB_MqttPublishWorker" ObjectId="3a2ea79a-b707-4456-b254-28657fc0459d">
            <Object Name="Init" ObjectId="6b327d4f-cdfc-4c3c-8193-3a61f98460d0" />
            <Object Name="PublishMessage" ObjectId="360ac381-546e-4086-9f4f-da87b5c10db3" />
          </Object>
          <Object Name="MQTT_MESSAGE" ObjectId="3cef9a7f-966d-4e13-b498-e616988669d3" />
        </Folder>
      </ProjectStructure>
    </data>
  </addData>
</project>